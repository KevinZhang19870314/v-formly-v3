(function(k,E){typeof exports=="object"&&typeof module<"u"?E(exports,require("mitt"),require("vue"),require("ajv"),require("vue-devui")):typeof define=="function"&&define.amd?define(["exports","mitt","vue","ajv","vue-devui"],E):(k=typeof globalThis<"u"?globalThis:k||self,E(k.lib={},k.mitt,k.Vue,k.Ajv,k["vue-devui"]))})(this,function(k,E,t,Q,O){"use strict";var me=Object.defineProperty;var pe=(k,E,t)=>E in k?me(k,E,{enumerable:!0,configurable:!0,writable:!0,value:t}):k[E]=t;var x=(k,E,t)=>(pe(k,typeof E!="symbol"?E+"":E,t),t);const H=o=>o&&typeof o=="object"&&"default"in o?o:{default:o},X=H(E),Z=H(Q),T="form-value-change",S="form-error-change";function P(o){return o.config.globalProperties.emitter}class I{constructor(e,a,s,n){x(this,"id");x(this,"state");x(this,"meta",t.ref({}));x(this,"type");x(this,"ui",t.ref({}));x(this,"error",t.ref(void 0));x(this,"_value",t.ref());x(this,"_initMetaValue");x(this,"appContext");if(this.constructor==I)throw new Error("Abstract classes can't be instantiated.");this.id=s,this.state=a,this.meta.value=n,this.type=n.ui&&n.ui.component||n.type,this.ui.value=Object.assign({},a.ui,n.ui),this.appContext=e,this.error.value=void 0,a.context.addContext(s,this),this._value.value=void 0,this._initMetaValue=this.getInitMetaValue()}get value(){return this._value.value}set value(e){if(this._value.value===e)return;this.setValue(e),P(this.appContext).emit(`${T}-${this.state._formId}`,{id:this.id,value:this._value.value}),this.state.updateObjProp(this.state.formData,this.id,this._value.value),this.state.validate.runValidationFormItem(this)}getInitMetaValue(){const e=this.id.split("/").filter(s=>s);let a="";return e.reduce((s,n,l)=>(l===e.length-1&&(a=s[n]),s[n]||{}),this.state.formData),a}}var j=(o=>(o.Object="object",o.Array="array",o.Boolean="boolean",o.Integer="integer",o))(j||{});class v{constructor(){x(this,"_map",new Map)}addContext(e,a){this._map.set(e,a)}removeContext(e){this._map.delete(e)}getContext(e){return this._map.get(e)}getContexts(){return this._map}getMap(){return this._map}}function K(o=8,e=10){const a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),s=e||a.length,n=[];if(o)for(let l=0;l<o;l++)n[l]=a[0|Math.random()*s];else{let l;n[8]=n[13]=n[18]=n[23]="-",n[14]="4";for(let d=0;d<36;d++)n[d]||(l=0|Math.random()*16,n[d]=a[d==19?l&3|8:l])}return n.join("")}function M(o){if(o===void 0)return;if(o===null)return null;const e=Object.assign({},o);return Object.keys(e).forEach(a=>e[a]=typeof o[a]=="object"?M(o[a]):o[a]),Array.isArray(o)?(e.length=o.length,Array.from(e)):e}const tt=Array.isArray,et=o=>typeof o=="function",G=o=>typeof o=="number",nt=o=>o!==null&&typeof o=="object";function ot(){const{appContext:o}=t.getCurrentInstance(),e=o.config.globalProperties;return{appContext:o,globalProperties:e}}class at{constructor(){x(this,"_formId",K(4));x(this,"_ignoreErrorIds",[]);x(this,"_context");x(this,"_layout",t.ref("horizontal"));x(this,"_ajvOptions",{allErrors:!0,strict:!1,loopEnum:50});x(this,"_formData",t.ref({}));x(this,"_meta",{});x(this,"_ui",{ingoreKeywords:["type","enum"],spanLabel:5,spanControl:19,grid:{gutter:36,span:24},errors:{required:"\u5FC5\u586B\u9879"}});x(this,"_validate");this._applyUseOptions()}get context(){return this._context}set context(e){this._context=e}get layout(){return this._layout}set layout(e){this._layout=e}get ajvOptions(){return this._ajvOptions}set ajvOptions(e){this._ajvOptions=e}get formData(){return this._formData.value}set formData(e){this._formData.value=e}get meta(){return this._meta}set meta(e){this._meta=e}get ui(){return this._ui}set ui(e){this._ui=Object.assign({},this._ui,e)}get validate(){return this._validate}set validate(e){this._validate=e}updateObjProp(e,a,s){const[n,...l]=a.split("/").filter(d=>d);l.length?this.updateObjProp(e[n],l.join("/"),s):e&&(e[n]=s)}_applyUseOptions(){const{globalProperties:e}=ot(),a=e.$VFORMLY_OPTIONS;!a||typeof a!="object"||(this.ui=a.ui)}}class rt{constructor(e,a){x(this,"state");x(this,"_ajv");x(this,"_validate");x(this,"appContext");this.state=a,this._ajv=new Z.default(a.ajvOptions),this._validate=null,this.appContext=e}async runValidateForm(){const{valid:e,errors:a}=this._isAjvValid(),n=this.state.context.getContexts().values();let l=!0;for(const d of n)l=await this._validation(d,e,a)&&l;return l}async runValidationFormItem(e){const{valid:a,errors:s}=this._isAjvValid();return await this._validation(e,a,s)}_ajvValidate(e){if(this._validate)return this._validate;const a=M(e);return this._replaceReactiveToRawData(a),this._validate=this._ajv.compile(a),this._validate}_forceCompile(){const e=M(this.state.meta);this._replaceReactiveToRawData(e),this._validate=this._ajv.compile(e)}_replaceReactiveToRawData(e){var n;let a,s;switch(e.type){case j.Object:a=Object.values(e.properties),a.forEach(l=>{this._replaceReactiveToRawData(l)});break;case j.Array:s=Object.keys(e),s.forEach(l=>{t.isRef(e[l])&&(e[l]=e[l]._value)}),a=Object.values((n=e.items)==null?void 0:n.properties),a.forEach(l=>{this._replaceReactiveToRawData(l)});break;default:s=Object.keys(e),s.forEach(l=>{t.isRef(e[l])&&(e[l]=e[l]._value)});break}}_getAjvError(e,a){let s;for(let n=0;n<a.length;n++){const l=a[n],d=this._getId(l);if(e===d){s=l;break}}return s}_isAjvValid(){const e=this._ajvValidate(this.state.meta);return{valid:e(this.state.formData||{}),errors:e.errors}}async _validation(e,a,s){let n=[];const l=`${S}-${this.state._formId}`,d=P(this.appContext);if(a)return d.emit(l,{id:e.id,error:void 0}),!0;{const c=this._getCustomError(e),f=await this._getCustomAsyncError(e),_=[...c,...f];this._replaceWithDefaultErrors(e,s),this._replaceWithCustomErrors(e.id,s,_);const p=this.state.ui.ingoreKeywords||[];n=s.filter(g=>p.indexOf(g.keyword)===-1),n=this._removeIgnoreErrors(n);const m=this._getAjvError(e.id,n);return d.emit(l,{id:e.id,error:m}),!m}}_getCustomError(e){var s,n;const a=(n=(s=e.ui)==null?void 0:s.value)==null?void 0:n.validator;return a?a(e.value):[]}async _getCustomAsyncError(e){var s,n;const a=(n=(s=e.ui)==null?void 0:s.value)==null?void 0:n.validatorAsync;return a?await a(e.value):[]}_replaceWithDefaultErrors(e,a){var d,c;if(!a||a.length===0)return;const s=((c=(d=e.ui)==null?void 0:d.value)==null?void 0:c.errors)||{},n=Object.assign({},this.state.ui.errors,s),l=Object.keys(n);l&&l.length>0&&a.forEach(f=>{l.indexOf(f.keyword)>-1&&(f.message=n[f.keyword])})}_replaceWithCustomErrors(e,a,s){s.forEach(n=>{const l=a.find(d=>d.keyword===n.keyword&&this._getId(d)===e);l&&(l.message=n.message)})}_removeIgnoreErrors(e){const a=this.state._ignoreErrorIds;return!a||a.length===0?e:e.filter(n=>a.indexOf(this._getId(n))===-1)}_getId(e){return e.params&&e.params.missingProperty?`${e.instancePath?e.instancePath:""}/${e.params.missingProperty}`:`${e.instancePath}`}}function D(o){const e=[],a="slotName";return o&&!o.type&&(o.type=j.Object),U(o,e,a),{slotsName:e}}function U(o,e,a){switch(o.type){case j.Object:Object.keys(o.properties).forEach(s=>{const n=o.properties[s];U(n,e,a)});break;case j.Array:Object.keys(o.items.properties).forEach(s=>{const n=o.items.properties[s];U(n,e,a)});break;default:if(o.ui){const s=Object.keys(o.ui).filter(n=>n.startsWith(a));s&&s.length>0&&s.forEach(n=>{e.push(o.ui[n])})}break}}function st(){return{visibleIf:lt}}function lt(o,e,a,s){if(!e.ui||!e.ui.visibleIf)return a;const n=Object.keys(e.ui.visibleIf)[0],l=e.ui.visibleIf[n];return s=s||{},typeof l!="function"||n!==s.id?a:l.call(null,o,s.id,s.value)}const it=t.defineComponent({name:"v-formly-v3-item"}),L=t.defineComponent({...it,props:{id:null,show:{type:Boolean,default:!0},meta:null},setup(o){const e=o;let a=t.ref(!0);const{slotsName:s}=D(e.meta),n=t.inject("state"),l=t.computed(()=>`v-${e.meta.ui&&e.meta.ui.component||e.meta.type}`),d=t.computed(()=>n.layout);c();function c(){if(!e.meta.type)throw new Error("Form item type must be one of these: number, string, boolean, array, object");a.value=e.show,f(a.value,e.id);const{visibleIf:_}=st(),{appContext:p}=t.getCurrentInstance();P(p).on(`${T}-${n._formId}`,g=>{let u=_(n.context,e.meta,a.value,{id:g.id,value:g.value});u!==a.value&&(a.value=u,f(a.value,e.id))})}function f(_,p){_?n._ignoreErrorIds=n._ignoreErrorIds.filter(m=>m!==p):n._ignoreErrorIds.indexOf(p)===-1&&n._ignoreErrorIds.push(p)}return(_,p)=>(t.openBlock(),t.createElementBlock("div",{style:t.normalizeStyle({display:t.unref(d)==="inline"?"inline-block":"block"})},[t.unref(a)?(t.openBlock(),t.createBlock(t.resolveDynamicComponent(t.unref(l)),{key:0,id:o.id,meta:o.meta},t.createSlots({_:2},[t.renderList(t.unref(s),m=>({name:m,fn:t.withCtx(g=>[t.renderSlot(_.$slots,m,t.normalizeProps(t.guardReactiveProps({...g})))])}))]),1032,["id","meta"])):t.createCommentVNode("",!0)],4))}}),ct={class:"v__formly"},dt={name:"v-formly-v3"},ft=t.defineComponent({...dt,props:{modelValue:null,layout:{default:"horizontal"},button:null,meta:null},emits:["update:modelValue","form-reset","form-submit"],setup(o,{expose:e,emit:a}){const s=o;if(!s.meta||typeof s.meta.properties>"u")throw new Error("Invalid Schema");let n={type:j.Object},l=t.ref(!1);const d=new at;t.provide("state",d);const{slotsName:c}=D(s.meta),{appContext:f}=t.getCurrentInstance(),_=P(f);p(),t.computed(()=>{const r=Object.assign({},d.ui);return s.layout==="vertical"?null:{span:r.spanControl,offset:r.spanLabel}}),t.watch(()=>s.modelValue,(r,C)=>{JSON.stringify(r)!==JSON.stringify(C)&&y(r)},{deep:!1}),t.watch(()=>d.formData,(r,C)=>{a("update:modelValue",r)},{deep:!0});function p(){d.layout=t.toRef(s,"layout"),n=Object.assign({},n,s.meta),d.meta=n,d.formData=Object.assign({},s.modelValue),m(d.formData,s.meta.properties),d.context=new v,d.validate=new rt(f,d)}function m(r,C){Object.keys(C).forEach(b=>{const $=C[b];if($.type!=="null")switch($.type){case j.Object:r[b]=r[b]||{},m(r[b],$.properties);break;case j.Array:r[b]=r[b]||[];break;case j.Boolean:break;default:r[b]=r[b]||void 0;break}})}function g(r){return d.context.getContext(r)}async function u(){return await d.validate.runValidateForm()}function y(r){const C=d.context.getContext("/");C&&(C.value=r,a("update:modelValue",d.formData))}function h(){a("form-reset",t.toRaw(d.formData)),y({})}async function i(){l.value=!0;const r=await u();l.value=!1,a("form-submit",{valid:r,data:r?t.toRaw(d.formData):void 0})}return t.onBeforeUnmount(()=>{_.all.clear()}),e({getContext:g,validate:u,reset:y,clearForm:h,submitForm:i}),(r,C)=>{const b=t.resolveComponent("d-button"),$=t.resolveComponent("d-form-operation"),F=t.resolveComponent("d-form");return t.openBlock(),t.createElementBlock("div",ct,[t.createVNode(F,{class:t.normalizeClass(["v",{v__inline:o.layout==="inline",v__horizontal:o.layout==="horizontal"}]),layout:o.layout,"label-size":"lg","label-align":"end","message-type":"text"},{default:t.withCtx(()=>[t.createVNode(L,{id:"/",meta:t.unref(n)},t.createSlots({_:2},[t.renderList(t.unref(c),B=>({name:B,fn:t.withCtx(q=>[t.renderSlot(r.$slots,B,t.normalizeProps(t.guardReactiveProps({...q})))])}))]),1032,["meta"]),o.button==="default"?(t.openBlock(),t.createBlock($,{key:0,class:"v__default-submit-button"},{default:t.withCtx(()=>[t.createVNode(b,{variant:"solid",color:"danger",onClick:h,style:{"margin-right":"8px"}},{default:t.withCtx(()=>[t.createTextVNode(" \u91CD\u7F6E ")]),_:1}),t.createVNode(b,{variant:"solid",color:"primary",onClick:i,loading:t.unref(l)},{default:t.withCtx(()=>[t.createTextVNode(" \u63D0\u4EA4 ")]),_:1},8,["loading"])]),_:1})):o.button==="custom"?t.renderSlot(r.$slots,"button",{key:1,loading:t.unref(l),clearForm:h,submitForm:i}):(t.openBlock(),t.createElementBlock(t.Fragment,{key:2},[],64))]),_:3},8,["layout","class"])])}}}),mt={class:"control-wrapper"},pt={class:"control-slot"},ut=t.defineComponent({name:"v-wrapper"}),ht=t.defineComponent({...ut,props:{id:null,show:{type:Boolean},meta:null},setup(o){const e=o,a=t.inject("state"),s=a.context.getContext(e.id),n=t.computed(()=>Object.assign({},a.ui,e.meta.ui)),l=t.computed({get(){return s.error.value},set(_){s.error.value=_}}),{appContext:d}=t.getCurrentInstance(),c=P(d);c.on(`${S}-${a._formId}`,f),t.onBeforeUnmount(()=>{c.off(`${S}-${a._formId}`,f)});function f(_){_.id===e.id&&(l.value=_.error?_.error.message:void 0)}return(_,p)=>{const m=t.resolveComponent("d-form-item");return t.openBlock(),t.createBlock(m,{label:o.meta.title,"help-tips":t.unref(n).optional,"extra-info":o.meta.description,class:t.normalizeClass({"show-required":t.unref(n).showRequired})},{default:t.withCtx(()=>[t.createElementVNode("div",mt,[t.createElementVNode("div",pt,[t.renderSlot(_.$slots,"default",{error:t.unref(l)},void 0,!0)]),t.withDirectives(t.createElementVNode("div",{class:"error-message"},t.toDisplayString(t.unref(l)),513),[[t.vShow,t.unref(l)]])])]),_:3},8,["label","help-tips","extra-info","class"])}}}),ue="",A=(o,e)=>{const a=o.__vccOpts||o;for(const[s,n]of e)a[s]=n;return a},V=A(ht,[["__scopeId","data-v-7af13b33"]]);class _t extends I{constructor(a,s,n,l){super(a,s,n,l);x(this,"childMetaPairs");this.childMetaPairs=this.buildChildMetaPairs(n,l),s.context.addContext(n,this)}initValue(){}setValue(){}set value(a){this.childMetaPairs.forEach(({key:s,propertyName:n})=>{const l=this.state.context.getContext(s);l&&(l.value=(a||{})[n])})}buildChildMetaPairs(a,s){const n=[];for(const l of Object.keys(s.properties||{})){const d=a==="/"?`/${l}`:`${a}/${l}`;n.push({key:d,propertyName:l,meta:s.properties[l]})}return n}}const gt=t.defineComponent({name:"v-object"}),Ct=t.defineComponent({...gt,props:{id:null,meta:null},setup(o){const e=o,{slotsName:a}=D(e.meta),s=t.inject("state"),{appContext:n}=t.getCurrentInstance(),l=new _t(n,s,e.id,e.meta),d=t.computed(()=>l.ui.value||{}),c=t.computed(()=>Object.assign({},s.ui.grid,d.value.grid).gutter),f=t.computed(()=>s.layout.value),_=t.reactive({"margin-left":`-${c.value/2}px`,"margin-right":`-${c.value/2}px`});function p(u){return u.ui&&u.ui.show}function m(u){if(f.value==="inline")return{};const y=u.meta.ui&&u.meta.ui.grid||{};return Object.assign({},s.ui.grid,d.value.grid,y)}const g=l.childMetaPairs;return(u,y)=>{const h=t.resolveComponent("d-col"),i=t.resolveComponent("d-row");return t.openBlock(),t.createBlock(i,{gutter:t.unref(c),wrap:"",style:t.normalizeStyle(_)},{default:t.withCtx(()=>[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(t.unref(g),(r,C)=>(t.openBlock(),t.createBlock(h,{key:C,span:m(r).span,offset:m(r).offset,xs:m(r).xs,sm:m(r).sm,md:m(r).md,lg:m(r).lg,xl:m(r).xl,xxl:m(r).xxl,style:t.normalizeStyle({display:t.unref(f)==="inline"?"inline-block":"block"})},{default:t.withCtx(()=>[t.createVNode(L,{id:r.key,meta:r.meta,show:p(r.meta)},t.createSlots({_:2},[t.renderList(t.unref(a),b=>({name:b,fn:t.withCtx($=>[t.renderSlot(u.$slots,b,t.normalizeProps(t.guardReactiveProps({...$})))])}))]),1032,["id","meta","show"])]),_:2},1032,["span","offset","xs","sm","md","lg","xl","xxl","style"]))),128))]),_:3},8,["gutter","style"])}}});function N(o,e){const a=t.ref({});return Object.keys(e.value).forEach(n=>{o.indexOf(n)>-1&&(a.value[n]=t.toRef(e.value,n))}),{bindings:a}}class R extends I{constructor(a,s,n,l){var d;super(a,s,n,l);x(this,"open");this.initValue(),this.meta.value&&(this.open=((d=this.meta.value.ui)==null?void 0:d.open)||!1)}initValue(){this._initMetaValue?this.value=this._initMetaValue:this.meta.value.default&&(this.value=this.meta.value.default)}setValue(a){this._value.value=a||void 0}}const yt=t.defineComponent({name:"v-string"}),bt=t.defineComponent({...yt,props:{id:null,meta:null},setup(o){const e=o,a=t.inject("state"),{appContext:s}=t.getCurrentInstance(),n=new R(s,a,e.id,e.meta),{bindings:l}=N(Object.keys(O.Input.props),n.ui),d=t.toRef(e.meta,"readOnly"),c=t.computed(()=>n.ui.value||{}),f=t.computed({get(){return n.value},set(h){n.value=h}});function _(){var h,i;(i=(h=t.unref(c)).change)==null||i.call(h,t.unref(f))}function p(h){var i,r;(r=(i=t.unref(c)).input)==null||r.call(i,h)}function m(){var h,i;(i=(h=t.unref(c)).clear)==null||i.call(h)}function g(h){var i,r;(r=(i=t.unref(c)).focus)==null||r.call(i,h)}function u(h){var i,r;(r=(i=t.unref(c)).blur)==null||r.call(i,h)}function y(h){var i,r;(r=(i=t.unref(c)).keydown)==null||r.call(i,h)}return(h,i)=>{const r=t.resolveComponent("d-input");return t.openBlock(),t.createBlock(V,{id:o.id,meta:o.meta},{default:t.withCtx(({error:C})=>[t.createVNode(r,t.mergeProps(t.unref(l),{modelValue:t.unref(f),"onUpdate:modelValue":i[0]||(i[0]=b=>t.isRef(f)?f.value=b:null),error:!!C,disabled:t.unref(d),onFocus:g,onBlur:u,onKeydown:y,onClear:m,onInput:p,onChange:_}),t.createSlots({_:2},[t.unref(c).slotNameOfPrefix?{name:"prefix",fn:t.withCtx(()=>[t.renderSlot(h.$slots,t.unref(c).slotNameOfPrefix)]),key:"0"}:void 0,t.unref(c).slotNameOfSuffix?{name:"suffix",fn:t.withCtx(()=>[t.renderSlot(h.$slots,t.unref(c).slotNameOfSuffix)]),key:"1"}:void 0,t.unref(c).slotNameOfPrepend?{name:"prepend",fn:t.withCtx(()=>[t.renderSlot(h.$slots,t.unref(c).slotNameOfPrepend)]),key:"2"}:void 0,t.unref(c).slotNameOfAppend?{name:"append",fn:t.withCtx(()=>[t.renderSlot(h.$slots,t.unref(c).slotNameOfAppend)]),key:"3"}:void 0]),1040,["modelValue","error","disabled"])]),_:3},8,["id","meta"])}}});class xt extends I{constructor(e,a,s,n){super(e,a,s,n),this.initValue()}initValue(){typeof this._initMetaValue<"u"?this.value=this._initMetaValue:typeof this.meta.value.default=="boolean"&&(this.value=this.meta.value.default)}setValue(e){this._value.value=e||!1}}const kt=t.defineComponent({name:"v-boolean"}),wt=t.defineComponent({...kt,props:{id:null,meta:null},setup(o){const e=o,a=t.inject("state"),{appContext:s}=t.getCurrentInstance(),n=new xt(s,a,e.id,e.meta),{bindings:l}=N(Object.keys(O.Switch.props),n.ui),d=t.toRef(e.meta,"readOnly"),c=t.computed(()=>n.ui.value||{}),f=t.computed({get(){return n.value},set(p){n.value=p||!1}});function _(){var p,m;(m=(p=t.unref(c)).change)==null||m.call(p,t.unref(f))}return(p,m)=>{const g=t.resolveComponent("d-switch");return t.openBlock(),t.createBlock(V,{id:o.id,meta:o.meta},{default:t.withCtx(()=>[t.createVNode(g,t.mergeProps({class:"v__boolean",modelValue:t.unref(f),"onUpdate:modelValue":m[0]||(m[0]=u=>t.isRef(f)?f.value=u:null)},t.unref(l),{disabled:t.unref(d),onChange:_}),t.createSlots({_:2},[t.unref(c).slotNameOfCheckedContent?{name:"checkedContent",fn:t.withCtx(()=>[t.renderSlot(p.$slots,t.unref(c).slotNameOfCheckedContent)]),key:"0"}:void 0,t.unref(c).slotNameOfUnCheckedContent?{name:"uncheckedContent",fn:t.withCtx(()=>[t.renderSlot(p.$slots,t.unref(c).slotNameOfUnCheckedContent)]),key:"1"}:void 0]),1040,["modelValue","disabled"])]),_:3},8,["id","meta"])}}}),Ot=t.defineComponent({name:"v-autocomplete"}),Vt=t.defineComponent({...Ot,props:{id:null,meta:null},setup(o){const e=o,a=t.inject("state"),{appContext:s}=t.getCurrentInstance(),n=new R(s,a,e.id,e.meta),{bindings:l}=N(Object.keys(O.AutoComplete.props),n.ui),d=t.toRef(e.meta,"readOnly"),c=t.ref();Object.assign(n,{autoCompleteRef:c});const f=t.computed(()=>n.ui.value||{}),_=t.computed({get(){return n.value},set(p){n.value=p||void 0}});return(p,m)=>{const g=t.resolveComponent("d-auto-complete");return t.openBlock(),t.createBlock(V,{id:o.id,meta:o.meta},{default:t.withCtx(()=>[t.createVNode(g,t.mergeProps({ref_key:"autoCompleteRef",ref:c,modelValue:t.unref(_),"onUpdate:modelValue":m[0]||(m[0]=u=>t.isRef(_)?_.value=u:null)},t.unref(l),{disabled:t.unref(d)}),t.createSlots({_:2},[t.unref(f).slotNameOfItem?{name:"item",fn:t.withCtx(u=>[t.renderSlot(p.$slots,t.unref(f).slotNameOfItem,t.normalizeProps(t.guardReactiveProps(u)))]),key:"0"}:void 0,t.unref(f).slotNameOfNothing?{name:"nothing",fn:t.withCtx(u=>[t.renderSlot(p.$slots,t.unref(f).slotNameOfNothing,{keyword:u})]),key:"1"}:void 0,t.unref(f).slotNameOfSearching?{name:"searching",fn:t.withCtx(u=>[t.renderSlot(p.$slots,t.unref(f).slotNameOfSearching,{keyword:u})]),key:"2"}:void 0,t.unref(f).slotNameOfPrefix?{name:"prefix",fn:t.withCtx(()=>[t.renderSlot(p.$slots,t.unref(f).slotNameOfPrefix)]),key:"3"}:void 0,t.unref(f).slotNameOfSuffix?{name:"suffix",fn:t.withCtx(()=>[t.renderSlot(p.$slots,t.unref(f).slotNameOfSuffix)]),key:"4"}:void 0,t.unref(f).slotNameOfPrepend?{name:"prepend",fn:t.withCtx(()=>[t.renderSlot(p.$slots,t.unref(f).slotNameOfPrepend)]),key:"5"}:void 0,t.unref(f).slotNameOfAppend?{name:"append",fn:t.withCtx(()=>[t.renderSlot(p.$slots,t.unref(f).slotNameOfAppend)]),key:"6"}:void 0]),1040,["modelValue","disabled"])]),_:3},8,["id","meta"])}}}),$t=t.defineComponent({name:"v-checkbox"}),Bt=t.defineComponent({...$t,props:{id:null,meta:null},setup(o){const e=o,a=t.inject("state"),{appContext:s}=t.getCurrentInstance(),n=new R(s,a,e.id,e.meta),{bindings:l}=N(Object.keys(O.CheckboxGroup.props),n.ui),d=t.toRef(e.meta,"readOnly"),c=t.computed(()=>n.ui.value||{}),f=t.computed({get(){return n.value||[]},set(p){n.value=p.length>0?p:void 0}});function _(){var p,m;(m=(p=t.unref(c)).change)==null||m.call(p,t.unref(f))}return(p,m)=>{const g=t.resolveComponent("d-checkbox-group"),u=t.resolveComponent("d-checkbox"),y=t.resolveComponent("d-col"),h=t.resolveComponent("d-row");return t.openBlock(),t.createBlock(V,{id:o.id,meta:o.meta},{default:t.withCtx(()=>[t.unref(c).span?(t.openBlock(),t.createBlock(g,t.mergeProps({key:1,class:"v__checkbox",modelValue:t.unref(f),"onUpdate:modelValue":m[1]||(m[1]=i=>t.isRef(f)?f.value=i:null)},t.unref(l),{disabled:t.unref(d),onChange:_}),{default:t.withCtx(()=>[t.createVNode(h,{wrap:""},{default:t.withCtx(()=>[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(o.meta.enum,(i,r)=>(t.openBlock(),t.createBlock(y,{class:"v__text-left",span:t.unref(c).span,key:r},{default:t.withCtx(()=>[t.createVNode(u,{value:i.value||i,disabled:i.disabled||!1},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(i.label||i),1)]),_:2},1032,["value","disabled"])]),_:2},1032,["span"]))),128))]),_:1})]),_:1},16,["modelValue","disabled"])):(t.openBlock(),t.createBlock(g,t.mergeProps({key:0,class:"v__checkbox",direction:"row",modelValue:t.unref(f),"onUpdate:modelValue":m[0]||(m[0]=i=>t.isRef(f)?f.value=i:null)},t.unref(l),{disabled:t.unref(d),options:o.meta.enum,onChange:_}),null,16,["modelValue","disabled","options"]))]),_:1},8,["id","meta"])}}}),Et=t.defineComponent({name:"v-date"}),Nt=t.defineComponent({...Et,props:{id:null,meta:null},setup(o){const e=o,a=t.inject("state"),{appContext:s}=t.getCurrentInstance(),n=new R(s,a,e.id,e.meta);let l={},d={};if(n.ui.value.pickerType==="range"){const{bindings:i}=N(Object.keys(O.DRangeDatePickerPro.props),n.ui);l=i}else{const{bindings:i}=N(Object.keys(O.DatePickerPro.props),n.ui);d=i}const c=t.ref(),f=t.ref();Object.assign(n,{rangeDatePickerRef:c,datePickerRef:f});const _=t.toRef(e.meta,"readOnly"),p=t.computed(()=>n.ui.value||{}),m=t.computed({get(){return n.value},set(i){n.value=i}});function g(i){var r,C;(C=(r=t.unref(p)).toggleChange)==null||C.call(r,i)}function u(i){var r,C;(C=(r=t.unref(p)).confirmEvent)==null||C.call(r,i)}function y(i){var r,C;(C=(r=t.unref(p)).focus)==null||C.call(r,i)}function h(){var i,r;(r=(i=t.unref(p)).blur)==null||r.call(i)}return(i,r)=>{const C=t.resolveComponent("d-date-picker-pro");return t.openBlock(),t.createBlock(V,{id:o.id,meta:o.meta},{default:t.withCtx(()=>[t.unref(p).pickerType==="range"?(t.openBlock(),t.createBlock(t.unref(O.DRangeDatePickerPro),t.mergeProps({key:0,ref_key:"rangeDatePickerRef",ref:c,class:"v__date",modelValue:t.unref(m),"onUpdate:modelValue":r[0]||(r[0]=b=>t.isRef(m)?m.value=b:null)},t.unref(l),{disabled:t.unref(_),onToggleChange:g,onConfirmEvent:u,onFocus:y,onBlur:h}),t.createSlots({_:2},[t.unref(p).slotNameOfRightArea?{name:"rightArea",fn:t.withCtx(()=>[t.renderSlot(i.$slots,t.unref(p).slotNameOfRightArea)]),key:"0"}:void 0,t.unref(p).slotNameOfFooter?{name:"footer",fn:t.withCtx(()=>[t.renderSlot(i.$slots,t.unref(p).slotNameOfFooter)]),key:"1"}:void 0]),1040,["modelValue","disabled"])):(t.openBlock(),t.createBlock(C,t.mergeProps({key:1,ref_key:"datePickerRef",ref:f,class:"v__date",modelValue:t.unref(m),"onUpdate:modelValue":r[1]||(r[1]=b=>t.isRef(m)?m.value=b:null)},t.unref(d),{disabled:t.unref(_),onToggleChange:g,onConfirmEvent:u,onFocus:y,onBlur:h}),t.createSlots({_:2},[t.unref(p).slotNameOfRightArea?{name:"rightArea",fn:t.withCtx(()=>[t.renderSlot(i.$slots,t.unref(p).slotNameOfRightArea)]),key:"0"}:void 0,t.unref(p).slotNameOfFooter?{name:"footer",fn:t.withCtx(()=>[t.renderSlot(i.$slots,t.unref(p).slotNameOfFooter)]),key:"1"}:void 0]),1040,["modelValue","disabled"]))]),_:3},8,["id","meta"])}}}),jt=t.defineComponent({name:"v-time"}),Rt=t.defineComponent({...jt,props:{id:null,meta:null},setup(o){const e=o,a=t.inject("state"),{appContext:s}=t.getCurrentInstance(),n=new R(s,a,e.id,e.meta);let l=t.ref(null),d={};const{bindings:c}=N(Object.keys(O.TimePicker.props),n.ui);d=c;const f=t.toRef(e.meta,"readOnly"),_=t.computed(()=>n.ui.value||{}),p=t.computed({get(){return n.value},set(u){n.value=u}});function m(u){var y,h;(h=(y=t.unref(_)).change)==null||h.call(y,u)}function g(u){var y,h;(h=(y=t.unref(_)).ok)==null||h.call(y,u)}return(u,y)=>{const h=t.resolveComponent("d-time-picker");return t.openBlock(),t.createBlock(V,{id:o.id,meta:o.meta},{default:t.withCtx(()=>[t.createVNode(h,t.mergeProps({ref_key:"timePicker",ref:l,class:"v__time",modelValue:t.unref(p),"onUpdate:modelValue":y[0]||(y[0]=i=>t.isRef(p)?p.value=i:null)},t.unref(d),{disabled:t.unref(f),onOk:g,onChange:m}),t.createSlots({_:2},[t.unref(_).slotNameOfCustomViewTemplate?{name:"customViewTemplate",fn:t.withCtx(()=>[t.renderSlot(u.$slots,t.unref(_).slotNameOfCustomViewTemplate,{ref:t.unref(l)})]),key:"0"}:void 0]),1040,["modelValue","disabled"])]),_:3},8,["id","meta"])}}}),It=t.defineComponent({name:"v-number"}),Pt=t.defineComponent({...It,props:{id:null,meta:null},setup(o){const e=o,a=t.inject("state"),{appContext:s}=t.getCurrentInstance(),n=new R(s,a,e.id,e.meta),{bindings:l}=N(Object.keys(O.InputNumber.props),n.ui),d=t.toRef(e.meta,"readOnly"),c=t.computed(()=>n.ui.value||{}),f=t.computed({get(){return n.value},set(i){n.value=i}});let _=t.ref(-1/0),p=t.ref(1/0),m=t.ref(1),g=t.ref(i=>i),u=t.ref(i=>i);y();function y(){const{minimum:i,exclusiveMinimum:r,maximum:C,exclusiveMaximum:b,multipleOf:$,type:F}=n.meta.value;m.value=$||1,typeof i<"u"&&(_.value=r?i+m.value:i),typeof C<"u"&&(p.value=b?C-m.value:C),F==="integer"&&(_.value=Math.trunc(_.value),p.value=Math.trunc(p.value),m.value=Math.trunc(m.value)),c.value.prefix!=null&&(c.value.formatter=B=>B==null?"":`${c.value.prefix} ${B}`,c.value.parser=B=>B.replace(`${c.value.prefix} `,"")),c.value.unit!=null&&(c.value.formatter=B=>B==null?"":`${B} ${c.value.unit}`,c.value.parser=B=>B.replace(` ${c.value.unit}`,"")),c.value.formatter&&(g.value=c.value.formatter),c.value.parser&&(u.value=c.value.parser)}function h(i){f.value=n.meta.value.type===j.Integer?Math.floor(i):i,c.value.change&&c.value.change(t.unref(f))}return(i,r)=>{const C=t.resolveComponent("d-input-number");return t.openBlock(),t.createBlock(V,{id:o.id,meta:o.meta},{default:t.withCtx(()=>[t.createVNode(C,t.mergeProps({class:"v__number",modelValue:t.unref(f),"onUpdate:modelValue":r[0]||(r[0]=b=>t.isRef(f)?f.value=b:null)},t.unref(l),{disabled:t.unref(d),min:t.unref(_),max:t.unref(p),step:t.unref(m),class:{"hidden-step":t.unref(c).hideStep},onChange:r[1]||(r[1]=b=>h(b))}),null,16,["modelValue","disabled","min","max","step","class"])]),_:1},8,["id","meta"])}}}),he="",W=A(Pt,[["__scopeId","data-v-936d25e3"]]);class St extends I{constructor(a,s,n,l){super(a,s,n,l);x(this,"ids",t.ref([]));this.initValue()}setValue(){}initValue(){var a,s;if(((a=this._initMetaValue)==null?void 0:a.length)>0)this.value=this._initMetaValue;else if(((s=t.unref(this.meta).default)==null?void 0:s.length)>0){const n=t.unref(this.meta).default;n.forEach(()=>this.add(!1)),setTimeout(()=>{n.forEach((l,d)=>{const c=this.state.context.getContext(`${this.id}/${d}`);c.value=l})}),this.validate()}}get value(){return this.getPathValue(this.state.formData,this.id)||[]}set value(a){if(this.value.length===0&&(a==null?void 0:a.length)===0||!Array.isArray(a)&&a!=null)return;const s=M(a),n=t.unref(this.ids).length;for(let l=0;l<n;l++)this.remove(n-l-1,!1);s&&s.length&&(s.forEach(()=>this.add(!1)),t.nextTick(()=>{s.forEach((l,d)=>{const c=this.state.context.getContext(`${this.id}/${d}`);c.value=l})})),this.validate()}validate(){return this.state.validate.runValidationFormItem(this)}getPathValue(a,s){const n=s.split("/").filter(d=>d);let l=M(a);for(let d=0;d<n.length;d++){const c=n[d];l=l[c]}return l}getEmptyData(){const a={},s=t.unref(this.meta).items.properties;return Object.keys(s).forEach(n=>{switch(s[n].type){case"object":a[n]={};break;case"array":a[n]=[];break;default:a[n]=void 0;break}}),a}add(a=!0){const s=`${this.id}/${t.unref(this.ids).length}`,n=this.getEmptyData();return this.state.updateObjProp(this.state.formData,s,n),this.ids.value.push({key:K()}),a&&this.validate(),s}remove(a,s=!0){this.ids.value.splice(a,1);const n=this.id.split("/").filter(c=>!!c);n.reduce((c,f,_)=>(_===n.length-1&&c[f].splice(a,1),c[f]),this.state.formData);const l=[];for(const c of this.state.context.getMap().keys())new RegExp(`^/?${this.id}/`).test(c)&&l.push(c);for(let c=a+1;c<t.unref(this.ids).length+1;c++){const f=new RegExp(`^(/?${this.id}/)${c}`);l.filter(_=>f.test(_)).forEach(_=>{const p=this.state.context.getContext(_),m=_.replace(f,(g,u)=>`${u}${c-1}`);if(p.id=m,p.childMetaPairs){const g=p.buildChildMetaPairs(m,t.unref(p.meta));p.childMetaPairs.forEach((u,y)=>{u.key=g[y].key})}this.state.context.addContext(m,p)})}const d=new RegExp(`^/?${this.id}/${t.unref(this.ids).length}`);l.filter(c=>d.test(c)).forEach(c=>{this.state.context.removeContext(c)}),s&&this.validate()}}const Mt={class:"control-wrapper"},At={class:"v__array-add"},Ft=["onClick"],Tt=t.defineComponent({name:"v-array"}),Dt=t.defineComponent({...Tt,props:{id:null,meta:null},setup(o){const e=o,a=t.inject("state"),{appContext:s}=t.getCurrentInstance(),n=new St(s,a,e.id,e.meta),l=P(s),d=t.computed(()=>t.unref(n.ui)||{});t.computed({get(){return n.value},set(r){n.value=r||[]}});const c=t.computed({get(){return t.unref(n.error)},set(r){n.error.value=r}}),f=t.toRef(e.meta,"readOnly"),_=t.computed(()=>t.unref(f)||e.meta.maxItems!=null&&t.unref(n.ids).length>=e.meta.maxItems),p=t.computed(()=>{const r=e.meta.minItems;return!(t.unref(f)||r!=null&&t.unref(n.ids).length<=r)}),m=t.ref(8),g=t.ref("");t.onMounted(()=>{var $;l.on(`${S}-${a._formId}`,u);const{grid:r,removable:C,removeTitle:b}=t.unref(d);m.value=($=r==null?void 0:r.arraySpan)!=null?$:8,g.value=C===!1?null:b}),t.onBeforeUnmount(()=>{l.off(`${S}-${a._formId}`,u)});function u(r){r.id===e.id&&(c.value=r.error?r.error.message:void 0)}function y(r){return`${e.id}/${r}`}function h(){var C,b;const r=n.add();(b=(C=t.unref(d)).add)==null||b.call(C,r)}function i(r){var C,b;n.remove(r),(b=(C=t.unref(d)).remove)==null||b.call(C,r)}return(r,C)=>{const b=t.resolveComponent("d-button"),$=t.resolveComponent("d-card"),F=t.resolveComponent("d-col"),B=t.resolveComponent("d-row"),q=t.resolveComponent("d-form-item");return t.openBlock(),t.createBlock(q,{label:o.meta.title,"help-tips":t.unref(d).optional,"extra-info":o.meta.description,class:t.normalizeClass({"show-required":t.unref(d).showRequired})},{default:t.withCtx(()=>[t.createElementVNode("div",Mt,[t.createElementVNode("div",At,[t.createVNode(b,{type:t.unref(d).addType,disabled:t.unref(_),onClick:h},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(t.unref(d).addTitle||"\u6DFB\u52A0"),1)]),_:1},8,["type","disabled"])]),t.createVNode(B,{class:"v__array-container",wrap:""},{default:t.withCtx(()=>[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(t.unref(n).ids.value,(fe,Y)=>(t.openBlock(),t.createBlock(F,{key:fe.key,span:m.value,class:"v__array-item"},{default:t.withCtx(()=>[t.createVNode($,{shadow:"never"},{content:t.withCtx(()=>[t.createVNode(L,{id:y(Y),meta:o.meta.items},null,8,["id","meta"]),t.unref(p)?(t.openBlock(),t.createElementBlock("span",{key:0,class:"v__array-remove",onClick:xe=>i(Y)},[t.createVNode(b,{icon:"delete",shape:"circle",title:"Delete"})],8,Ft)):t.createCommentVNode("",!0)]),_:2},1024)]),_:2},1032,["span"]))),128))]),_:1}),t.withDirectives(t.createElementVNode("div",{class:"error-message"},t.toDisplayString(t.unref(c)),513),[[t.vShow,t.unref(c)]])])]),_:1},8,["label","help-tips","extra-info","class"])}}}),_e="",Ut=A(Dt,[["__scopeId","data-v-1ae10066"]]),Lt=["innerHTML"],zt=["textContent"],qt=["innerHTML"],Ht=t.defineComponent({name:"v-text"}),Kt=t.defineComponent({...Ht,props:{id:null,meta:null},setup(o){const e=o,a=t.inject("state"),{appContext:s}=t.getCurrentInstance(),n=new R(s,a,e.id,e.meta),l=t.computed(()=>n.ui.value||{}),d=t.computed(()=>et(t.unref(l).text)?t.unref(l).text():t.unref(l).text);return(c,f)=>{const _=t.resolveComponent("d-form-item");return t.openBlock(),t.createElementBlock("div",null,[t.createVNode(_,{label:o.meta.title},t.createSlots({default:t.withCtx(()=>[t.unref(l).slotNameOfDefault?t.renderSlot(c.$slots,t.unref(l).slotNameOfDefault,{key:0},void 0,!0):(t.openBlock(),t.createElementBlock(t.Fragment,{key:1},[t.unref(l).html?(t.openBlock(),t.createElementBlock("span",{key:0,innerHTML:t.unref(l).html,class:"v__content-text"},null,8,Lt)):(t.openBlock(),t.createElementBlock("span",{key:1,textContent:t.toDisplayString(t.unref(d)),class:"v__content-text"},null,8,zt))],64))]),_:2},[o.meta.description?{name:"extra",fn:t.withCtx(()=>[t.createElementVNode("div",{innerHTML:o.meta.description,class:"v__description"},null,8,qt)]),key:"0"}:void 0]),1032,["label"])])}}}),ge="",Gt=A(Kt,[["__scopeId","data-v-36d4d8fd"]]),Wt=t.defineComponent({name:"v-textarea"}),Jt=t.defineComponent({...Wt,props:{id:null,meta:null},setup(o){const e=o,a=t.inject("state"),{appContext:s}=t.getCurrentInstance(),n=new R(s,a,e.id,e.meta),{bindings:l}=N(Object.keys(O.Textarea.props),n.ui),d=t.toRef(e.meta,"readOnly"),c=t.toRef(e.meta,"maxLength"),f=t.computed(()=>n.ui.value||{}),_=t.computed({get(){return n.value},set(h){n.value=h}});function p(h){var i,r;(r=(i=t.unref(f)).change)==null||r.call(i,t.unref(h))}function m(h){var i,r;(r=(i=t.unref(f)).update)==null||r.call(i,t.unref(h))}function g(h){var i,r;(r=(i=t.unref(f)).focus)==null||r.call(i,h)}function u(h){var i,r;(r=(i=t.unref(f)).blur)==null||r.call(i,h)}function y(h){var i,r;(r=(i=t.unref(f)).keydown)==null||r.call(i,h)}return(h,i)=>{const r=t.resolveComponent("d-textarea");return t.openBlock(),t.createBlock(V,{id:o.id,meta:o.meta},{default:t.withCtx(({error:C})=>[t.createVNode(r,t.mergeProps(t.unref(l),{error:!!C,disabled:t.unref(d),maxlength:t.unref(c),rows:t.unref(f).rows,modelValue:t.unref(_),"onUpdate:modelValue":i[0]||(i[0]=b=>t.isRef(_)?_.value=b:null),onUpdate:m,onChange:p,onFocus:g,onBlur:u,onKeydown:y}),null,16,["error","disabled","maxlength","rows","modelValue"])]),_:1},8,["id","meta"])}}});class z extends I{constructor(e,a,s,n){super(e,a,s,n),this.initValue()}initValue(){this._initMetaValue?this.value=this._initMetaValue:t.unref(this.meta).default&&(this.value=t.unref(this.meta).default)}setValue(e){switch(this.type){case"slider":this._value.value=tt(e)||G(e)?e:void 0;break;default:this._value.value=e||void 0;break}}}function Yt(o,e){t.watch(o,()=>{e.validate._forceCompile()})}const Qt=t.defineComponent({name:"v-slider"}),Xt=t.defineComponent({...Qt,props:{id:null,meta:null},setup(o){const e=o,a=t.inject("state"),{appContext:s}=t.getCurrentInstance(),n=new z(s,a,e.id,e.meta),{bindings:l}=N(Object.keys(O.Slider.props),n.ui),d=t.toRef(e.meta,"readOnly"),c=t.toRef(e.meta,"minimum"),f=t.toRef(e.meta,"maximum"),_=t.toRef(e.meta,"multipleOf");Yt([c,f,_],a);const p=t.computed(()=>n.ui.value||{}),m=t.computed({get(){return n.value},set(u){p.value.range?n.value=u||[]:n.value=G(u)?u:void 0}});function g(u){var y,h;(h=(y=t.unref(p)).change)==null||h.call(y,u)}return(u,y)=>{const h=t.resolveComponent("d-slider");return t.openBlock(),t.createBlock(V,{id:o.id,meta:o.meta},{default:t.withCtx(()=>[t.createVNode(h,t.mergeProps(t.unref(l),{disabled:t.unref(d),min:t.unref(c)||0,max:t.unref(f)||100,step:t.unref(_)||1,modelValue:t.unref(m),"onUpdate:modelValue":y[0]||(y[0]=i=>t.isRef(m)?m.value=i:null),onChange:g}),null,16,["disabled","min","max","step","modelValue"])]),_:1},8,["id","meta"])}}}),Zt=t.defineComponent({name:"v-rate"}),vt=t.defineComponent({...Zt,props:{id:null,meta:null},setup(o){const e=o,a=t.inject("state"),{appContext:s}=t.getCurrentInstance(),n=new z(s,a,e.id,e.meta),{bindings:l}=N(Object.keys(O.Rate.props),n.ui),d=t.toRef(e.meta,"readOnly"),c=t.computed(()=>n.ui.value||{}),f=t.computed({get(){return n.value},set(p){n.value=p}});function _(p){var m,g;(g=(m=t.unref(c)).change)==null||g.call(m,p)}return(p,m)=>{const g=t.resolveComponent("d-rate");return t.openBlock(),t.createBlock(V,{id:o.id,meta:o.meta},{default:t.withCtx(()=>[t.createVNode(g,t.mergeProps(t.unref(l),{read:t.unref(d),count:o.meta.maximum||5,modelValue:t.unref(f),"onUpdate:modelValue":m[0]||(m[0]=u=>t.isRef(f)?f.value=u:null),onChange:_}),null,16,["read","count","modelValue"])]),_:1},8,["id","meta"])}}}),te=t.defineComponent({name:"v-tag"}),ee=t.defineComponent({...te,props:{id:null,meta:null},setup(o){const e=o,a=t.inject("state"),{appContext:s}=t.getCurrentInstance(),n=new z(s,a,e.id,e.meta),l=t.toRef(e.meta,"readOnly"),d=t.ref([]),c=t.computed(()=>n.ui.value||{}),f=t.computed({get(){return n.value},set(g){c.value.range?n.value=g||[]:n.value=g}});t.watch(()=>t.unref(n.meta).enum,m,{immediate:!0});function _(g,u){var y,h,i,r;g.disabled||(g.checked=u,p(),(h=(y=t.unref(c)).checkedChange)==null||h.call(y,u),(r=(i=t.unref(c)).change)==null||r.call(i,t.toRaw(t.unref(f))))}function p(){const g=t.unref(d).filter(u=>u.checked).map(u=>u.value);f.value=g.length?g:void 0}function m(g){let u=t.unref(g);u==null||!Array.isArray(u)||u.length===0||(typeof u[0]!="object"&&(u=u.map(y=>({label:y,value:y}))),u.forEach(y=>{y.checked=(f.value||[]).indexOf(y.value)>-1}),u.forEach(y=>y.disabled=e.meta.readOnly),d.value=u)}return(g,u)=>{const y=t.resolveComponent("d-tag");return t.openBlock(),t.createBlock(V,{id:o.id,meta:o.meta},{default:t.withCtx(()=>[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(d.value,h=>(t.openBlock(),t.createBlock(y,{key:h.value,type:"primary",class:t.normalizeClass({disabled:h.disabled||t.unref(l)}),checked:h.checked,onClick:()=>_(h,!h.checked)},{default:t.withCtx(()=>[t.createElementVNode("span",null,t.toDisplayString(h.label),1)]),_:2},1032,["class","checked","onClick"]))),128))]),_:1},8,["id","meta"])}}}),Ce="",ne=A(ee,[["__scopeId","data-v-7c567630"]]),oe=t.defineComponent({name:"v-radio"}),ae=t.defineComponent({...oe,props:{id:null,meta:null},setup(o){const e=o,a=t.inject("state"),{appContext:s}=t.getCurrentInstance(),n=new R(s,a,e.id,e.meta),{bindings:l}=N(Object.keys(O.RadioGroup.props),n.ui),d=t.toRef(e.meta,"readOnly"),c=t.computed(()=>n.ui.value||{}),f=t.computed(()=>(t.unref(c).options||[]).map(m=>nt(m)?Object.assign(m,{disabled:m.disabled||!1}):{label:m,value:m,disabled:!1})),_=t.computed({get(){return n.value},set(m){n.value=m}});function p(){var m,g;(g=(m=t.unref(c)).change)==null||g.call(m,t.unref(_))}return(m,g)=>{const u=t.resolveComponent("d-radio-button"),y=t.resolveComponent("d-radio"),h=t.resolveComponent("d-radio-group");return t.openBlock(),t.createBlock(V,{id:o.id,meta:o.meta},{default:t.withCtx(()=>[t.createVNode(h,t.mergeProps({direction:"row",disabled:t.unref(d)},t.unref(l),{modelValue:t.unref(_),"onUpdate:modelValue":g[0]||(g[0]=i=>t.isRef(_)?_.value=i:null),onChange:p}),{default:t.withCtx(()=>[t.unref(c).optionType==="button"?(t.openBlock(!0),t.createElementBlock(t.Fragment,{key:0},t.renderList(t.unref(f),i=>(t.openBlock(),t.createBlock(u,{key:i.value,value:i.value,disabled:i.disabled},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(i.label),1)]),_:2},1032,["value","disabled"]))),128)):(t.openBlock(!0),t.createElementBlock(t.Fragment,{key:1},t.renderList(t.unref(f),i=>(t.openBlock(),t.createBlock(y,{key:i.value,value:i.value,disabled:i.disabled},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(i.label),1)]),_:2},1032,["value","disabled"]))),128))]),_:1},16,["disabled","modelValue"])]),_:1},8,["id","meta"])}}}),re=t.defineComponent({name:"v-select"}),se=t.defineComponent({...re,props:{id:null,meta:null},setup(o){const e=o,a=t.inject("state"),{appContext:s}=t.getCurrentInstance(),n=new R(s,a,e.id,e.meta),{bindings:l}=N(Object.keys(O.Select.props),n.ui),d=t.toRef(e.meta,"readOnly"),c=t.computed(()=>n.ui.value||{}),f=t.computed({get(){return n.value},set(i){n.value=i}}),_=t.computed(()=>["slotNameOfDefault","slotNameOfEmpty"].some(r=>!!t.unref(c)[`${r}`]));function p(i){var r,C;(C=(r=t.unref(c)).valueChange)==null||C.call(r,i)}function m(i){var r,C;(C=(r=t.unref(c)).toggleChange)==null||C.call(r,i)}function g(i){var r,C;(C=(r=t.unref(c)).blur)==null||C.call(r,i)}function u(i){var r,C;(C=(r=t.unref(c)).focus)==null||C.call(r,i)}function y(){var i,r;(r=(i=t.unref(c)).clear)==null||r.call(i)}function h(i){var r,C;(C=(r=t.unref(c)).removeTag)==null||C.call(r,i)}return(i,r)=>{const C=t.resolveComponent("d-select");return t.openBlock(),t.createBlock(V,{id:o.id,meta:o.meta},{default:t.withCtx(()=>[t.unref(_)?(t.openBlock(),t.createBlock(C,t.mergeProps({key:0,modelValue:t.unref(f),"onUpdate:modelValue":r[0]||(r[0]=b=>t.isRef(f)?f.value=b:null)},t.unref(l),{disabled:t.unref(d),onBlur:g,onFocus:u,onClear:y,onRemoveTag:h,onToggleChange:m,onValueChange:p}),t.createSlots({default:t.withCtx(()=>[t.unref(c).slotNameOfDefault?t.renderSlot(i.$slots,t.unref(c).slotNameOfDefault,{key:0}):t.createCommentVNode("",!0)]),_:2},[t.unref(c).slotNameOfEmpty?{name:"empty",fn:t.withCtx(()=>[t.renderSlot(i.$slots,t.unref(c).slotNameOfEmpty)]),key:"0"}:void 0]),1040,["modelValue","disabled"])):(t.openBlock(),t.createBlock(C,t.mergeProps({key:1,modelValue:t.unref(f),"onUpdate:modelValue":r[1]||(r[1]=b=>t.isRef(f)?f.value=b:null)},t.unref(l),{disabled:t.unref(d),onBlur:g,onFocus:u,onClear:y,onRemoveTag:h,onToggleChange:m,onValueChange:p}),null,16,["modelValue","disabled"]))]),_:3},8,["id","meta"])}}});function w(o,e,a){o.component(e,a)}function le(o){w(o,"v-object",Ct),w(o,"v-string",bt),w(o,"v-boolean",wt),w(o,"v-array",Ut),w(o,"v-autocomplete",Vt),w(o,"v-checkbox",Bt),w(o,"v-date",Nt),w(o,"v-number",W),w(o,"v-integer",W),w(o,"v-time",Rt),w(o,"v-text",Gt),w(o,"v-radio",ae),w(o,"v-textarea",Jt),w(o,"v-slider",Xt),w(o,"v-rate",vt),w(o,"v-tag",ne),w(o,"v-select",se)}const ie=[ft,V];function J(o){ie.forEach(e=>{o.component(e.name,e)}),le(o)}const ce={installFormly:J},ye="",de={install:function(o,e){if(o.config.globalProperties.emitter=X.default(),!e.lib||e.lib==="devui")ce.installFormly(o);else throw new Error("Unsupport lib");return o.config.globalProperties.$VFORMLY_OPTIONS=e,o}};k.BaseMeta=I,k.FORM_VALUE_CHANGE=T,k.default=de,k.installFormly=J,k.registerFormComponent=w,Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
