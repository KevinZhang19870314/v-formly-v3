(function(k,$){typeof exports=="object"&&typeof module<"u"?$(exports,require("mitt"),require("vue"),require("ajv"),require("vue-devui")):typeof define=="function"&&define.amd?define(["exports","mitt","vue","ajv","vue-devui"],$):(k=typeof globalThis<"u"?globalThis:k||self,$(k.lib={},k.mitt,k.Vue,k.Ajv,k["vue-devui"]))})(this,function(k,$,t,Q,O){"use strict";var me=Object.defineProperty;var pe=(k,$,t)=>$ in k?me(k,$,{enumerable:!0,configurable:!0,writable:!0,value:t}):k[$]=t;var b=(k,$,t)=>(pe(k,typeof $!="symbol"?$+"":$,t),t);const H=o=>o&&typeof o=="object"&&"default"in o?o:{default:o},X=H($),Z=H(Q),F="form-value-change",P="form-error-change";function I(o){return o.config.globalProperties.emitter}class R{constructor(e,a,s,n){b(this,"id");b(this,"state");b(this,"meta",t.ref({}));b(this,"type");b(this,"ui",t.ref({}));b(this,"error",t.ref(void 0));b(this,"_value",t.ref());b(this,"_initMetaValue");b(this,"appContext");if(this.constructor==R)throw new Error("Abstract classes can't be instantiated.");this.id=s,this.state=a,this.meta.value=n,this.type=n.ui&&n.ui.component||n.type,this.ui.value=Object.assign({},a.ui,n.ui),this.appContext=e,this.error.value=void 0,a.context.addContext(s,this),this._value.value=void 0,this._initMetaValue=this.getInitMetaValue()}get value(){return this._value.value}set value(e){if(this._value.value===e)return;this.setValue(e),I(this.appContext).emit(`${F}-${this.state._formId}`,{id:this.id,value:this._value.value}),this.state.updateObjProp(this.state.formData,this.id,this._value.value),this.state.validate.runValidationFormItem(this)}getInitMetaValue(){const e=this.id.split("/").filter(s=>s);let a="";return e.reduce((s,n,l)=>(l===e.length-1&&(a=s[n]),s[n]||{}),this.state.formData),a}}var N=(o=>(o.Object="object",o.Array="array",o.Boolean="boolean",o.Integer="integer",o))(N||{});class v{constructor(){b(this,"_map",new Map)}addContext(e,a){this._map.set(e,a)}removeContext(e){this._map.delete(e)}getContext(e){return this._map.get(e)}getContexts(){return this._map}getMap(){return this._map}}function K(o=8,e=10){const a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),s=e||a.length,n=[];if(o)for(let l=0;l<o;l++)n[l]=a[0|Math.random()*s];else{let l;n[8]=n[13]=n[18]=n[23]="-",n[14]="4";for(let d=0;d<36;d++)n[d]||(l=0|Math.random()*16,n[d]=a[d==19?l&3|8:l])}return n.join("")}function S(o){if(o===void 0)return;if(o===null)return null;const e=Object.assign({},o);return Object.keys(e).forEach(a=>e[a]=typeof o[a]=="object"?S(o[a]):o[a]),Array.isArray(o)?(e.length=o.length,Array.from(e)):e}const tt=Array.isArray,et=o=>typeof o=="function",G=o=>typeof o=="number",nt=o=>o!==null&&typeof o=="object";function ot(){const{appContext:o}=t.getCurrentInstance(),e=o.config.globalProperties;return{appContext:o,globalProperties:e}}class at{constructor(){b(this,"_formId",K(4));b(this,"_ignoreErrorIds",[]);b(this,"_context");b(this,"_layout",t.ref("horizontal"));b(this,"_ajvOptions",{allErrors:!0,strict:!1,loopEnum:50});b(this,"_formData",t.ref({}));b(this,"_meta",{});b(this,"_ui",{ingoreKeywords:["type","enum"],spanLabel:5,spanControl:19,grid:{gutter:36,span:24},errors:{required:"\u5FC5\u586B\u9879"}});b(this,"_validate");this._applyUseOptions()}get context(){return this._context}set context(e){this._context=e}get layout(){return this._layout}set layout(e){this._layout=e}get ajvOptions(){return this._ajvOptions}set ajvOptions(e){this._ajvOptions=e}get formData(){return this._formData.value}set formData(e){this._formData.value=e}get meta(){return this._meta}set meta(e){this._meta=e}get ui(){return this._ui}set ui(e){this._ui=Object.assign({},this._ui,e)}get validate(){return this._validate}set validate(e){this._validate=e}updateObjProp(e,a,s){const[n,...l]=a.split("/").filter(d=>d);l.length?this.updateObjProp(e[n],l.join("/"),s):e&&(e[n]=s)}_applyUseOptions(){const{globalProperties:e}=ot(),a=e.$VFORMLY_OPTIONS;!a||typeof a!="object"||(this.ui=a.ui)}}class rt{constructor(e,a){b(this,"state");b(this,"_ajv");b(this,"_validate");b(this,"appContext");this.state=a,this._ajv=new Z.default(a.ajvOptions),this._validate=null,this.appContext=e}async runValidateForm(){const{valid:e,errors:a}=this._isAjvValid(),n=this.state.context.getContexts().values();let l=!0;for(const d of n)l=await this._validation(d,e,a)&&l;return l}async runValidationFormItem(e){const{valid:a,errors:s}=this._isAjvValid();return await this._validation(e,a,s)}_ajvValidate(e){if(this._validate)return this._validate;const a=S(e);return this._replaceReactiveToRawData(a),this._validate=this._ajv.compile(a),this._validate}_forceCompile(){const e=S(this.state.meta);this._replaceReactiveToRawData(e),this._validate=this._ajv.compile(e)}_replaceReactiveToRawData(e){var n;let a,s;switch(e.type){case N.Object:a=Object.values(e.properties),a.forEach(l=>{this._replaceReactiveToRawData(l)});break;case N.Array:s=Object.keys(e),s.forEach(l=>{t.isRef(e[l])&&(e[l]=e[l]._value)}),a=Object.values((n=e.items)==null?void 0:n.properties),a.forEach(l=>{this._replaceReactiveToRawData(l)});break;default:s=Object.keys(e),s.forEach(l=>{t.isRef(e[l])&&(e[l]=e[l]._value)});break}}_getAjvError(e,a){let s;for(let n=0;n<a.length;n++){const l=a[n],d=this._getId(l);if(e===d){s=l;break}}return s}_isAjvValid(){const e=this._ajvValidate(this.state.meta);return{valid:e(this.state.formData||{}),errors:e.errors}}async _validation(e,a,s){let n=[];const l=`${P}-${this.state._formId}`,d=I(this.appContext);if(a)return d.emit(l,{id:e.id,error:void 0}),!0;{const f=this._getCustomError(e),c=await this._getCustomAsyncError(e),u=[...f,...c];this._replaceWithDefaultErrors(e,s),this._replaceWithCustomErrors(e.id,s,u);const p=this.state.ui.ingoreKeywords||[];n=s.filter(_=>p.indexOf(_.keyword)===-1),n=this._removeIgnoreErrors(n);const m=this._getAjvError(e.id,n);return d.emit(l,{id:e.id,error:m}),!m}}_getCustomError(e){var s,n;const a=(n=(s=e.ui)==null?void 0:s.value)==null?void 0:n.validator;return a?a(e.value):[]}async _getCustomAsyncError(e){var s,n;const a=(n=(s=e.ui)==null?void 0:s.value)==null?void 0:n.validatorAsync;return a?await a(e.value):[]}_replaceWithDefaultErrors(e,a){var d,f;if(!a||a.length===0)return;const s=((f=(d=e.ui)==null?void 0:d.value)==null?void 0:f.errors)||{},n=Object.assign({},this.state.ui.errors,s),l=Object.keys(n);l&&l.length>0&&a.forEach(c=>{l.indexOf(c.keyword)>-1&&(c.message=n[c.keyword])})}_replaceWithCustomErrors(e,a,s){s.forEach(n=>{const l=a.find(d=>d.keyword===n.keyword&&this._getId(d)===e);l&&(l.message=n.message)})}_removeIgnoreErrors(e){const a=this.state._ignoreErrorIds;return!a||a.length===0?e:e.filter(n=>a.indexOf(this._getId(n))===-1)}_getId(e){return e.params&&e.params.missingProperty?`${e.instancePath?e.instancePath:""}/${e.params.missingProperty}`:`${e.instancePath}`}}function T(o){const e=[],a="slotName";return o&&!o.type&&(o.type=N.Object),D(o,e,a),{slotsName:e}}function D(o,e,a){switch(o.type){case N.Object:Object.keys(o.properties).forEach(s=>{const n=o.properties[s];D(n,e,a)});break;case N.Array:Object.keys(o.items.properties).forEach(s=>{const n=o.items.properties[s];D(n,e,a)});break;default:if(o.ui){const s=Object.keys(o.ui).filter(n=>n.startsWith(a));s&&s.length>0&&s.forEach(n=>{e.push(o.ui[n])})}break}}function st(){return{visibleIf:lt}}function lt(o,e,a,s){if(!e.ui||!e.ui.visibleIf)return a;const n=Object.keys(e.ui.visibleIf)[0],l=e.ui.visibleIf[n];return s=s||{},typeof l!="function"||n!==s.id?a:l.call(null,o,s.id,s.value)}const it=t.defineComponent({name:"v-formly-v3-item"}),U=t.defineComponent({...it,props:{id:null,show:{type:Boolean,default:!0},meta:null},setup(o){const e=o;let a=t.ref(!0);const{slotsName:s}=T(e.meta),n=t.inject("state"),l=t.computed(()=>`v-${e.meta.ui&&e.meta.ui.component||e.meta.type}`),d=t.computed(()=>n.layout);f();function f(){if(!e.meta.type)throw new Error("Form item type must be one of these: number, string, boolean, array, object");a.value=e.show,c(a.value,e.id);const{visibleIf:u}=st(),{appContext:p}=t.getCurrentInstance();I(p).on(`${F}-${n._formId}`,_=>{let h=u(n.context,e.meta,a.value,{id:_.id,value:_.value});h!==a.value&&(a.value=h,c(a.value,e.id))})}function c(u,p){u?n._ignoreErrorIds=n._ignoreErrorIds.filter(m=>m!==p):n._ignoreErrorIds.indexOf(p)===-1&&n._ignoreErrorIds.push(p)}return(u,p)=>(t.openBlock(),t.createElementBlock("div",{style:t.normalizeStyle({display:t.unref(d)==="inline"?"inline-block":"block"})},[t.unref(a)?(t.openBlock(),t.createBlock(t.resolveDynamicComponent(t.unref(l)),{key:0,id:o.id,meta:o.meta},t.createSlots({_:2},[t.renderList(t.unref(s),m=>({name:m,fn:t.withCtx(_=>[t.renderSlot(u.$slots,m,t.normalizeProps(t.guardReactiveProps({..._})))])}))]),1032,["id","meta"])):t.createCommentVNode("",!0)],4))}}),ct={class:"v__formly"},dt={name:"v-formly-v3"},ft=t.defineComponent({...dt,props:{modelValue:null,layout:{default:"horizontal"},button:null,meta:null},emits:["update:modelValue","form-reset","form-submit"],setup(o,{expose:e,emit:a}){const s=o;if(!s.meta||typeof s.meta.properties>"u")throw new Error("Invalid Schema");let n={type:N.Object},l=t.ref(!1);const d=new at;t.provide("state",d);const{slotsName:f}=T(s.meta),{appContext:c}=t.getCurrentInstance(),u=I(c);p(),t.computed(()=>{const r=Object.assign({},d.ui);return s.layout==="vertical"?null:{span:r.spanControl,offset:r.spanLabel}}),t.watch(()=>s.modelValue,(r,g)=>{JSON.stringify(r)!==JSON.stringify(g)&&C(r)},{deep:!1}),t.watch(()=>d.formData,(r,g)=>{a("update:modelValue",r)},{deep:!0});function p(){d.layout=t.toRef(s,"layout"),n=Object.assign({},n,s.meta),d.meta=n,d.formData=Object.assign({},s.modelValue),m(d.formData,s.meta.properties),d.context=new v,d.validate=new rt(c,d)}function m(r,g){Object.keys(g).forEach(x=>{const B=g[x];if(B.type!=="null")switch(B.type){case N.Object:r[x]=r[x]||{},m(r[x],B.properties);break;case N.Array:r[x]=r[x]||[];break;case N.Boolean:break;default:r[x]=r[x]||void 0;break}})}function _(r){return d.context.getContext(r)}async function h(){return await d.validate.runValidateForm()}function C(r){const g=d.context.getContext("/");g&&(g.value=r,a("update:modelValue",d.formData))}function y(){a("form-reset",t.toRaw(d.formData)),C({})}async function i(){l.value=!0;const r=await h();l.value=!1,a("form-submit",{valid:r,data:r?t.toRaw(d.formData):void 0})}return t.onBeforeUnmount(()=>{u.all.clear()}),e({getContext:_,validate:h,reset:C,clearForm:y,submitForm:i}),(r,g)=>{const x=t.resolveComponent("d-button"),B=t.resolveComponent("d-form-operation"),z=t.resolveComponent("d-form");return t.openBlock(),t.createElementBlock("div",ct,[t.createVNode(z,{class:t.normalizeClass(["v",{v__inline:o.layout==="inline",v__horizontal:o.layout==="horizontal"}]),layout:o.layout,"label-size":"lg","label-align":"end","message-type":"text"},{default:t.withCtx(()=>[t.createVNode(U,{id:"/",meta:t.unref(n)},t.createSlots({_:2},[t.renderList(t.unref(f),A=>({name:A,fn:t.withCtx(q=>[t.renderSlot(r.$slots,A,t.normalizeProps(t.guardReactiveProps({...q})))])}))]),1032,["meta"]),o.button==="default"?(t.openBlock(),t.createBlock(B,{key:0,class:"v__default-submit-button"},{default:t.withCtx(()=>[t.createVNode(x,{variant:"solid",color:"danger",onClick:y,style:{"margin-right":"8px"}},{default:t.withCtx(()=>[t.createTextVNode(" \u91CD\u7F6E ")]),_:1}),t.createVNode(x,{variant:"solid",color:"primary",onClick:i,loading:t.unref(l)},{default:t.withCtx(()=>[t.createTextVNode(" \u63D0\u4EA4 ")]),_:1},8,["loading"])]),_:1})):o.button==="custom"?t.renderSlot(r.$slots,"button",{key:1,loading:t.unref(l),clearForm:y,submitForm:i}):(t.openBlock(),t.createElementBlock(t.Fragment,{key:2},[],64))]),_:3},8,["layout","class"])])}}}),mt={class:"control-wrapper"},pt={class:"control-slot"},ut={name:"v-wrapper"},ht=t.defineComponent({...ut,props:{id:null,show:{type:Boolean},meta:null},setup(o){const e=o,a=t.inject("state"),s=a.context.getContext(e.id),n=t.computed(()=>Object.assign({},a.ui,e.meta.ui)),l=t.computed({get(){return s.error.value},set(u){s.error.value=u}}),{appContext:d}=t.getCurrentInstance(),f=I(d);f.on(`${P}-${a._formId}`,c),t.onBeforeUnmount(()=>{f.off(`${P}-${a._formId}`,c)});function c(u){u.id===e.id&&(l.value=u.error?u.error.message:void 0)}return(u,p)=>{const m=t.resolveComponent("d-form-item");return t.openBlock(),t.createBlock(m,{label:o.meta.title,"help-tips":t.unref(n).optional,"extra-info":o.meta.description,class:t.normalizeClass({"show-required":t.unref(n).showRequired})},{default:t.withCtx(()=>[t.createElementVNode("div",mt,[t.createElementVNode("div",pt,[t.renderSlot(u.$slots,"default",{error:t.unref(l)},void 0,!0)]),t.withDirectives(t.createElementVNode("div",{class:"error-message"},t.toDisplayString(t.unref(l)),513),[[t.vShow,t.unref(l)]])])]),_:3},8,["label","help-tips","extra-info","class"])}}}),ue="",M=(o,e)=>{const a=o.__vccOpts||o;for(const[s,n]of e)a[s]=n;return a},V=M(ht,[["__scopeId","data-v-2142e340"]]);class _t extends R{constructor(a,s,n,l){super(a,s,n,l);b(this,"childMetaPairs");this.childMetaPairs=this.buildChildMetaPairs(n,l),s.context.addContext(n,this)}initValue(){}setValue(){}set value(a){this.childMetaPairs.forEach(({key:s,propertyName:n})=>{const l=this.state.context.getContext(s);l&&(l.value=(a||{})[n])})}buildChildMetaPairs(a,s){const n=[];for(const l of Object.keys(s.properties||{})){const d=a==="/"?`/${l}`:`${a}/${l}`;n.push({key:d,propertyName:l,meta:s.properties[l]})}return n}}const gt=t.defineComponent({name:"v-object"}),Ct=t.defineComponent({...gt,props:{id:null,meta:null},setup(o){const e=o,{slotsName:a}=T(e.meta),s=t.inject("state"),{appContext:n}=t.getCurrentInstance(),l=new _t(n,s,e.id,e.meta),d=t.computed(()=>l.ui.value||{}),f=t.computed(()=>Object.assign({},s.ui.grid,d.value.grid).gutter),c=t.computed(()=>s.layout.value),u=t.reactive({"margin-left":`-${f.value/2}px`,"margin-right":`-${f.value/2}px`});function p(h){return h.ui&&h.ui.show}function m(h){if(c.value==="inline")return{};const C=h.meta.ui&&h.meta.ui.grid||{};return Object.assign({},s.ui.grid,d.value.grid,C)}const _=l.childMetaPairs;return(h,C)=>{const y=t.resolveComponent("d-col"),i=t.resolveComponent("d-row");return t.openBlock(),t.createBlock(i,{gutter:t.unref(f),wrap:"",style:t.normalizeStyle(u)},{default:t.withCtx(()=>[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(t.unref(_),(r,g)=>(t.openBlock(),t.createBlock(y,{key:g,span:m(r).span,offset:m(r).offset,xs:m(r).xs,sm:m(r).sm,md:m(r).md,lg:m(r).lg,xl:m(r).xl,xxl:m(r).xxl,style:t.normalizeStyle({display:t.unref(c)==="inline"?"inline-block":"block"})},{default:t.withCtx(()=>[t.createVNode(U,{id:r.key,meta:r.meta,show:p(r.meta)},t.createSlots({_:2},[t.renderList(t.unref(a),x=>({name:x,fn:t.withCtx(B=>[t.renderSlot(h.$slots,x,t.normalizeProps(t.guardReactiveProps({...B})))])}))]),1032,["id","meta","show"])]),_:2},1032,["span","offset","xs","sm","md","lg","xl","xxl","style"]))),128))]),_:3},8,["gutter","style"])}}});function E(o,e){const a=t.ref({});return Object.keys(e.value).forEach(n=>{o.indexOf(n)>-1&&(a.value[n]=t.toRef(e.value,n))}),{bindings:a}}class j extends R{constructor(a,s,n,l){var d;super(a,s,n,l);b(this,"open");this.initValue(),this.meta.value&&(this.open=((d=this.meta.value.ui)==null?void 0:d.open)||!1)}initValue(){this._initMetaValue?this.value=this._initMetaValue:this.meta.value.default&&(this.value=this.meta.value.default)}setValue(a){this._value.value=a||void 0}}const yt=t.defineComponent({name:"v-string"}),xt=t.defineComponent({...yt,props:{id:null,meta:null},setup(o){const e=o,a=t.inject("state"),{appContext:s}=t.getCurrentInstance(),n=new j(s,a,e.id,e.meta),{bindings:l}=E(Object.keys(O.Input.props),n.ui),d=t.toRef(e.meta,"readOnly"),f=t.toRef(e.meta,"maxLength"),c=t.computed(()=>n.ui.value||{}),u=t.computed({get(){return n.value},set(i){n.value=i}});function p(){var i,r;(r=(i=t.unref(c)).change)==null||r.call(i,t.unref(u))}function m(i){var r,g;(g=(r=t.unref(c)).input)==null||g.call(r,i)}function _(){var i,r;(r=(i=t.unref(c)).clear)==null||r.call(i)}function h(i){var r,g;(g=(r=t.unref(c)).focus)==null||g.call(r,i)}function C(i){var r,g;(g=(r=t.unref(c)).blur)==null||g.call(r,i)}function y(i){var r,g;(g=(r=t.unref(c)).keydown)==null||g.call(r,i)}return(i,r)=>{const g=t.resolveComponent("d-input");return t.openBlock(),t.createBlock(V,{id:o.id,meta:o.meta},{default:t.withCtx(({error:x})=>[t.createVNode(g,t.mergeProps(t.unref(l),{modelValue:t.unref(u),"onUpdate:modelValue":r[0]||(r[0]=B=>t.isRef(u)?u.value=B:null),maxlength:t.unref(f),error:!!x,disabled:t.unref(d),onFocus:h,onBlur:C,onKeydown:y,onClear:_,onInput:m,onChange:p}),t.createSlots({_:2},[t.unref(c).slotNameOfPrefix?{name:"prefix",fn:t.withCtx(()=>[t.renderSlot(i.$slots,t.unref(c).slotNameOfPrefix)]),key:"0"}:void 0,t.unref(c).slotNameOfSuffix?{name:"suffix",fn:t.withCtx(()=>[t.renderSlot(i.$slots,t.unref(c).slotNameOfSuffix)]),key:"1"}:void 0,t.unref(c).slotNameOfPrepend?{name:"prepend",fn:t.withCtx(()=>[t.renderSlot(i.$slots,t.unref(c).slotNameOfPrepend)]),key:"2"}:void 0,t.unref(c).slotNameOfAppend?{name:"append",fn:t.withCtx(()=>[t.renderSlot(i.$slots,t.unref(c).slotNameOfAppend)]),key:"3"}:void 0]),1040,["modelValue","maxlength","error","disabled"])]),_:3},8,["id","meta"])}}});class bt extends R{constructor(e,a,s,n){super(e,a,s,n),this.initValue()}initValue(){typeof this._initMetaValue<"u"?this.value=this._initMetaValue:typeof this.meta.value.default=="boolean"&&(this.value=this.meta.value.default)}setValue(e){this._value.value=e||!1}}const kt=t.defineComponent({name:"v-boolean"}),wt=t.defineComponent({...kt,props:{id:null,meta:null},setup(o){const e=o,a=t.inject("state"),{appContext:s}=t.getCurrentInstance(),n=new bt(s,a,e.id,e.meta),{bindings:l}=E(Object.keys(O.Switch.props),n.ui),d=t.toRef(e.meta,"readOnly"),f=t.computed(()=>n.ui.value||{}),c=t.computed({get(){return n.value},set(p){n.value=p||!1}});function u(){var p,m;(m=(p=t.unref(f)).change)==null||m.call(p,t.unref(c))}return(p,m)=>{const _=t.resolveComponent("d-switch");return t.openBlock(),t.createBlock(V,{id:o.id,meta:o.meta},{default:t.withCtx(()=>[t.createVNode(_,t.mergeProps({class:"v__boolean",modelValue:t.unref(c),"onUpdate:modelValue":m[0]||(m[0]=h=>t.isRef(c)?c.value=h:null)},t.unref(l),{disabled:t.unref(d),onChange:u}),t.createSlots({_:2},[t.unref(f).slotNameOfCheckedContent?{name:"checkedContent",fn:t.withCtx(()=>[t.renderSlot(p.$slots,t.unref(f).slotNameOfCheckedContent)]),key:"0"}:void 0,t.unref(f).slotNameOfUnCheckedContent?{name:"uncheckedContent",fn:t.withCtx(()=>[t.renderSlot(p.$slots,t.unref(f).slotNameOfUnCheckedContent)]),key:"1"}:void 0]),1040,["modelValue","disabled"])]),_:3},8,["id","meta"])}}}),Ot=t.defineComponent({name:"v-autocomplete"}),Vt=t.defineComponent({...Ot,props:{id:null,meta:null},setup(o){const e=o,a=t.inject("state"),{appContext:s}=t.getCurrentInstance(),n=new j(s,a,e.id,e.meta),{bindings:l}=E(Object.keys(O.AutoComplete.props),n.ui),d=t.toRef(e.meta,"readOnly"),f=t.ref();Object.assign(n,{autoCompleteRef:f});const c=t.computed(()=>n.ui.value||{}),u=t.computed({get(){return n.value},set(p){n.value=p||void 0}});return(p,m)=>{const _=t.resolveComponent("d-auto-complete");return t.openBlock(),t.createBlock(V,{id:o.id,meta:o.meta},{default:t.withCtx(()=>[t.createVNode(_,t.mergeProps({ref_key:"autoCompleteRef",ref:f,modelValue:t.unref(u),"onUpdate:modelValue":m[0]||(m[0]=h=>t.isRef(u)?u.value=h:null)},t.unref(l),{disabled:t.unref(d)}),t.createSlots({_:2},[t.unref(c).slotNameOfItem?{name:"item",fn:t.withCtx(h=>[t.renderSlot(p.$slots,t.unref(c).slotNameOfItem,t.normalizeProps(t.guardReactiveProps(h)))]),key:"0"}:void 0,t.unref(c).slotNameOfNothing?{name:"nothing",fn:t.withCtx(h=>[t.renderSlot(p.$slots,t.unref(c).slotNameOfNothing,{keyword:h})]),key:"1"}:void 0,t.unref(c).slotNameOfSearching?{name:"searching",fn:t.withCtx(h=>[t.renderSlot(p.$slots,t.unref(c).slotNameOfSearching,{keyword:h})]),key:"2"}:void 0,t.unref(c).slotNameOfPrefix?{name:"prefix",fn:t.withCtx(()=>[t.renderSlot(p.$slots,t.unref(c).slotNameOfPrefix)]),key:"3"}:void 0,t.unref(c).slotNameOfSuffix?{name:"suffix",fn:t.withCtx(()=>[t.renderSlot(p.$slots,t.unref(c).slotNameOfSuffix)]),key:"4"}:void 0,t.unref(c).slotNameOfPrepend?{name:"prepend",fn:t.withCtx(()=>[t.renderSlot(p.$slots,t.unref(c).slotNameOfPrepend)]),key:"5"}:void 0,t.unref(c).slotNameOfAppend?{name:"append",fn:t.withCtx(()=>[t.renderSlot(p.$slots,t.unref(c).slotNameOfAppend)]),key:"6"}:void 0]),1040,["modelValue","disabled"])]),_:3},8,["id","meta"])}}}),Bt=t.defineComponent({name:"v-checkbox"}),$t=t.defineComponent({...Bt,props:{id:null,meta:null},setup(o){const e=o,a=t.inject("state"),{appContext:s}=t.getCurrentInstance(),n=new j(s,a,e.id,e.meta),{bindings:l}=E(Object.keys(O.CheckboxGroup.props),n.ui),d=t.toRef(e.meta,"readOnly"),f=t.computed(()=>n.ui.value||{}),c=t.computed({get(){return n.value||[]},set(p){n.value=p.length>0?p:void 0}});function u(){var p,m;(m=(p=t.unref(f)).change)==null||m.call(p,t.unref(c))}return(p,m)=>{const _=t.resolveComponent("d-checkbox-group"),h=t.resolveComponent("d-checkbox"),C=t.resolveComponent("d-col"),y=t.resolveComponent("d-row");return t.openBlock(),t.createBlock(V,{id:o.id,meta:o.meta},{default:t.withCtx(()=>[t.unref(f).span?(t.openBlock(),t.createBlock(_,t.mergeProps({key:1,class:"v__checkbox",modelValue:t.unref(c),"onUpdate:modelValue":m[1]||(m[1]=i=>t.isRef(c)?c.value=i:null)},t.unref(l),{disabled:t.unref(d),onChange:u}),{default:t.withCtx(()=>[t.createVNode(y,{wrap:""},{default:t.withCtx(()=>[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(o.meta.enum,(i,r)=>(t.openBlock(),t.createBlock(C,{class:"v__text-left",span:t.unref(f).span,key:r},{default:t.withCtx(()=>[t.createVNode(h,{value:i.value||i,disabled:i.disabled||!1},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(i.label||i),1)]),_:2},1032,["value","disabled"])]),_:2},1032,["span"]))),128))]),_:1})]),_:1},16,["modelValue","disabled"])):(t.openBlock(),t.createBlock(_,t.mergeProps({key:0,class:"v__checkbox",direction:"row",modelValue:t.unref(c),"onUpdate:modelValue":m[0]||(m[0]=i=>t.isRef(c)?c.value=i:null)},t.unref(l),{disabled:t.unref(d),options:o.meta.enum,onChange:u}),null,16,["modelValue","disabled","options"]))]),_:1},8,["id","meta"])}}}),Et=t.defineComponent({name:"v-date"}),Nt=t.defineComponent({...Et,props:{id:null,meta:null},setup(o){const e=o,a=t.inject("state"),{appContext:s}=t.getCurrentInstance(),n=new j(s,a,e.id,e.meta);let l={},d={};if(n.ui.value.pickerType==="range"){const{bindings:i}=E(Object.keys(O.DRangeDatePickerPro.props),n.ui);l=i}else{const{bindings:i}=E(Object.keys(O.DatePickerPro.props),n.ui);d=i}const f=t.ref(),c=t.ref();Object.assign(n,{rangeDatePickerRef:f,datePickerRef:c});const u=t.toRef(e.meta,"readOnly"),p=t.computed(()=>n.ui.value||{}),m=t.computed({get(){return n.value},set(i){n.value=i}});function _(i){var r,g;(g=(r=t.unref(p)).toggleChange)==null||g.call(r,i)}function h(i){var r,g;(g=(r=t.unref(p)).confirmEvent)==null||g.call(r,i)}function C(i){var r,g;(g=(r=t.unref(p)).focus)==null||g.call(r,i)}function y(){var i,r;(r=(i=t.unref(p)).blur)==null||r.call(i)}return(i,r)=>{const g=t.resolveComponent("d-date-picker-pro");return t.openBlock(),t.createBlock(V,{id:o.id,meta:o.meta},{default:t.withCtx(()=>[t.unref(p).pickerType==="range"?(t.openBlock(),t.createBlock(t.unref(O.DRangeDatePickerPro),t.mergeProps({key:0,ref_key:"rangeDatePickerRef",ref:f,class:"v__date",modelValue:t.unref(m),"onUpdate:modelValue":r[0]||(r[0]=x=>t.isRef(m)?m.value=x:null)},t.unref(l),{disabled:t.unref(u),onToggleChange:_,onConfirmEvent:h,onFocus:C,onBlur:y}),t.createSlots({_:2},[t.unref(p).slotNameOfRightArea?{name:"rightArea",fn:t.withCtx(()=>[t.renderSlot(i.$slots,t.unref(p).slotNameOfRightArea)]),key:"0"}:void 0,t.unref(p).slotNameOfFooter?{name:"footer",fn:t.withCtx(()=>[t.renderSlot(i.$slots,t.unref(p).slotNameOfFooter)]),key:"1"}:void 0]),1040,["modelValue","disabled"])):(t.openBlock(),t.createBlock(g,t.mergeProps({key:1,ref_key:"datePickerRef",ref:c,class:"v__date",modelValue:t.unref(m),"onUpdate:modelValue":r[1]||(r[1]=x=>t.isRef(m)?m.value=x:null)},t.unref(d),{disabled:t.unref(u),onToggleChange:_,onConfirmEvent:h,onFocus:C,onBlur:y}),t.createSlots({_:2},[t.unref(p).slotNameOfRightArea?{name:"rightArea",fn:t.withCtx(()=>[t.renderSlot(i.$slots,t.unref(p).slotNameOfRightArea)]),key:"0"}:void 0,t.unref(p).slotNameOfFooter?{name:"footer",fn:t.withCtx(()=>[t.renderSlot(i.$slots,t.unref(p).slotNameOfFooter)]),key:"1"}:void 0]),1040,["modelValue","disabled"]))]),_:3},8,["id","meta"])}}}),jt=t.defineComponent({name:"v-time"}),Rt=t.defineComponent({...jt,props:{id:null,meta:null},setup(o){const e=o,a=t.inject("state"),{appContext:s}=t.getCurrentInstance(),n=new j(s,a,e.id,e.meta);let l=t.ref(null),d={};const{bindings:f}=E(Object.keys(O.TimePicker.props),n.ui);d=f;const c=t.toRef(e.meta,"readOnly"),u=t.computed(()=>n.ui.value||{}),p=t.computed({get(){return n.value},set(_){n.value=_}});function m(_){var h,C;(C=(h=t.unref(u)).change)==null||C.call(h,_)}return(_,h)=>{const C=t.resolveComponent("d-time-picker");return t.openBlock(),t.createBlock(V,{id:o.id,meta:o.meta},{default:t.withCtx(()=>[t.createVNode(C,t.mergeProps({ref_key:"timePickerRef",ref:l,class:"v__time",modelValue:t.unref(p),"onUpdate:modelValue":h[0]||(h[0]=y=>t.isRef(p)?p.value=y:null)},t.unref(d),{disabled:t.unref(c),onChange:m}),t.createSlots({_:2},[t.unref(u).slotNameOfCustomViewTemplate?{name:"customViewTemplate",fn:t.withCtx(()=>[t.renderSlot(_.$slots,t.unref(u).slotNameOfCustomViewTemplate,{ref:t.unref(l)})]),key:"0"}:void 0]),1040,["modelValue","disabled"])]),_:3},8,["id","meta"])}}}),It=t.defineComponent({name:"v-number"}),Pt=t.defineComponent({...It,props:{id:null,meta:null},setup(o){const e=o,a=t.inject("state"),{appContext:s}=t.getCurrentInstance(),n=new j(s,a,e.id,e.meta),{bindings:l}=E(Object.keys(O.InputNumber.props),n.ui),d=t.toRef(e.meta,"readOnly"),f=t.computed(()=>n.ui.value||{}),c=t.computed({get(){return n.value},set(C){n.value=C}});let u=t.ref(-1/0),p=t.ref(1/0),m=t.ref(1);_();function _(){const{minimum:C,exclusiveMinimum:y,maximum:i,exclusiveMaximum:r,multipleOf:g,type:x}=n.meta.value;m.value=g||1,typeof C<"u"&&(u.value=y?C+m.value:C),typeof i<"u"&&(p.value=r?i-m.value:i),x==="integer"&&(u.value=Math.trunc(u.value),p.value=Math.trunc(p.value),m.value=Math.trunc(m.value))}function h(C){c.value=n.meta.value.type===N.Integer?Math.floor(C):C,f.value.change&&f.value.change(t.unref(c))}return(C,y)=>{const i=t.resolveComponent("d-input-number");return t.openBlock(),t.createBlock(V,{id:o.id,meta:o.meta},{default:t.withCtx(()=>[t.createVNode(i,t.mergeProps({class:"v__number",modelValue:t.unref(c),"onUpdate:modelValue":y[0]||(y[0]=r=>t.isRef(c)?c.value=r:null)},t.unref(l),{disabled:t.unref(d),min:t.unref(u),max:t.unref(p),step:t.unref(m),class:{"hidden-step":t.unref(f).hideStep},onChange:y[1]||(y[1]=r=>h(r))}),null,16,["modelValue","disabled","min","max","step","class"])]),_:1},8,["id","meta"])}}}),he="",W=M(Pt,[["__scopeId","data-v-4ad3983a"]]);class St extends R{constructor(a,s,n,l){super(a,s,n,l);b(this,"ids",t.ref([]));this.initValue()}setValue(){}initValue(){var a,s;if(((a=this._initMetaValue)==null?void 0:a.length)>0)this.value=this._initMetaValue;else if(((s=t.unref(this.meta).default)==null?void 0:s.length)>0){const n=t.unref(this.meta).default;n.forEach(()=>this.add(!1)),setTimeout(()=>{n.forEach((l,d)=>{const f=this.state.context.getContext(`${this.id}/${d}`);f.value=l})}),this.validate()}}get value(){return this.getPathValue(this.state.formData,this.id)||[]}set value(a){if(this.value.length===0&&(a==null?void 0:a.length)===0||!Array.isArray(a)&&a!=null)return;const s=S(a),n=t.unref(this.ids).length;for(let l=0;l<n;l++)this.remove(n-l-1,!1);s&&s.length&&(s.forEach(()=>this.add(!1)),t.nextTick(()=>{s.forEach((l,d)=>{const f=this.state.context.getContext(`${this.id}/${d}`);f.value=l})})),this.validate()}validate(){return this.state.validate.runValidationFormItem(this)}getPathValue(a,s){const n=s.split("/").filter(d=>d);let l=S(a);for(let d=0;d<n.length;d++){const f=n[d];l=l[f]}return l}getEmptyData(){const a={},s=t.unref(this.meta).items.properties;return Object.keys(s).forEach(n=>{switch(s[n].type){case"object":a[n]={};break;case"array":a[n]=[];break;default:a[n]=void 0;break}}),a}add(a=!0){const s=`${this.id}/${t.unref(this.ids).length}`,n=this.getEmptyData();return this.state.updateObjProp(this.state.formData,s,n),this.ids.value.push({key:K()}),a&&this.validate(),s}remove(a,s=!0){this.ids.value.splice(a,1);const n=this.id.split("/").filter(f=>!!f);n.reduce((f,c,u)=>(u===n.length-1&&f[c].splice(a,1),f[c]),this.state.formData);const l=[];for(const f of this.state.context.getMap().keys())new RegExp(`^/?${this.id}/`).test(f)&&l.push(f);for(let f=a+1;f<t.unref(this.ids).length+1;f++){const c=new RegExp(`^(/?${this.id}/)${f}`);l.filter(u=>c.test(u)).forEach(u=>{const p=this.state.context.getContext(u),m=u.replace(c,(_,h)=>`${h}${f-1}`);if(p.id=m,p.childMetaPairs){const _=p.buildChildMetaPairs(m,t.unref(p.meta));p.childMetaPairs.forEach((h,C)=>{h.key=_[C].key})}this.state.context.addContext(m,p)})}const d=new RegExp(`^/?${this.id}/${t.unref(this.ids).length}`);l.filter(f=>d.test(f)).forEach(f=>{this.state.context.removeContext(f)}),s&&this.validate()}}const Mt={class:"control-wrapper"},At={class:"v__array-add"},Ft=["onClick"],Tt=t.defineComponent({name:"v-array"}),Dt=t.defineComponent({...Tt,props:{id:null,meta:null},setup(o){const e=o,a=t.inject("state"),{appContext:s}=t.getCurrentInstance(),n=new St(s,a,e.id,e.meta),l=I(s),d=t.computed(()=>t.unref(n.ui)||{});t.computed({get(){return n.value},set(r){n.value=r||[]}});const f=t.computed({get(){return t.unref(n.error)},set(r){n.error.value=r}}),c=t.toRef(e.meta,"readOnly"),u=t.computed(()=>t.unref(c)||e.meta.maxItems!=null&&t.unref(n.ids).length>=e.meta.maxItems),p=t.computed(()=>{const r=e.meta.minItems;return!(t.unref(c)||r!=null&&t.unref(n.ids).length<=r)}),m=t.ref(8),_=t.ref("");t.onMounted(()=>{var B;l.on(`${P}-${a._formId}`,h);const{grid:r,removable:g,removeTitle:x}=t.unref(d);m.value=(B=r==null?void 0:r.arraySpan)!=null?B:8,_.value=g===!1?null:x}),t.onBeforeUnmount(()=>{l.off(`${P}-${a._formId}`,h)});function h(r){r.id===e.id&&(f.value=r.error?r.error.message:void 0)}function C(r){return`${e.id}/${r}`}function y(){var g,x;const r=n.add();(x=(g=t.unref(d)).add)==null||x.call(g,r)}function i(r){var g,x;n.remove(r),(x=(g=t.unref(d)).remove)==null||x.call(g,r)}return(r,g)=>{const x=t.resolveComponent("d-button"),B=t.resolveComponent("d-card"),z=t.resolveComponent("d-col"),A=t.resolveComponent("d-row"),q=t.resolveComponent("d-form-item");return t.openBlock(),t.createBlock(q,{label:o.meta.title,"help-tips":t.unref(d).optional,"extra-info":o.meta.description,class:t.normalizeClass({"show-required":t.unref(d).showRequired})},{default:t.withCtx(()=>[t.createElementVNode("div",Mt,[t.createElementVNode("div",At,[t.createVNode(x,{variant:t.unref(d).addType,disabled:t.unref(u),onClick:y},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(t.unref(d).addTitle||"\u6DFB\u52A0"),1)]),_:1},8,["variant","disabled"])]),t.createVNode(A,{class:"v__array-container",wrap:""},{default:t.withCtx(()=>[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(t.unref(n).ids.value,(fe,Y)=>(t.openBlock(),t.createBlock(z,{key:fe.key,span:m.value,class:"v__array-item"},{default:t.withCtx(()=>[t.createVNode(B,{shadow:"never"},{content:t.withCtx(()=>[t.createVNode(U,{id:C(Y),meta:o.meta.items},null,8,["id","meta"]),t.unref(p)?(t.openBlock(),t.createElementBlock("span",{key:0,class:"v__array-remove",onClick:be=>i(Y)},[t.createVNode(x,{icon:"delete",shape:"circle",title:"Delete"})],8,Ft)):t.createCommentVNode("",!0)]),_:2},1024)]),_:2},1032,["span"]))),128))]),_:1}),t.withDirectives(t.createElementVNode("div",{class:"error-message"},t.toDisplayString(t.unref(f)),513),[[t.vShow,t.unref(f)]])])]),_:1},8,["label","help-tips","extra-info","class"])}}}),_e="",Ut=M(Dt,[["__scopeId","data-v-5d1e9900"]]),Lt=["innerHTML"],zt=["textContent"],qt=["innerHTML"],Ht=t.defineComponent({name:"v-text"}),Kt=t.defineComponent({...Ht,props:{id:null,meta:null},setup(o){const e=o,a=t.inject("state"),{appContext:s}=t.getCurrentInstance(),n=new j(s,a,e.id,e.meta),l=t.computed(()=>n.ui.value||{}),d=t.computed(()=>et(t.unref(l).text)?t.unref(l).text():t.unref(l).text);return(f,c)=>{const u=t.resolveComponent("d-form-item");return t.openBlock(),t.createElementBlock("div",null,[t.createVNode(u,{label:o.meta.title},t.createSlots({default:t.withCtx(()=>[t.unref(l).slotNameOfDefault?t.renderSlot(f.$slots,t.unref(l).slotNameOfDefault,{key:0},void 0,!0):(t.openBlock(),t.createElementBlock(t.Fragment,{key:1},[t.unref(l).html?(t.openBlock(),t.createElementBlock("span",{key:0,innerHTML:t.unref(l).html,class:"v__content-text"},null,8,Lt)):(t.openBlock(),t.createElementBlock("span",{key:1,textContent:t.toDisplayString(t.unref(d)),class:"v__content-text"},null,8,zt))],64))]),_:2},[o.meta.description?{name:"extra",fn:t.withCtx(()=>[t.createElementVNode("div",{innerHTML:o.meta.description,class:"v__description"},null,8,qt)]),key:"0"}:void 0]),1032,["label"])])}}}),ge="",Gt=M(Kt,[["__scopeId","data-v-36d4d8fd"]]),Wt=t.defineComponent({name:"v-textarea"}),Jt=t.defineComponent({...Wt,props:{id:null,meta:null},setup(o){const e=o,a=t.inject("state"),{appContext:s}=t.getCurrentInstance(),n=new j(s,a,e.id,e.meta),{bindings:l}=E(Object.keys(O.Textarea.props),n.ui),d=t.toRef(e.meta,"readOnly"),f=t.toRef(e.meta,"maxLength"),c=t.computed(()=>n.ui.value||{}),u=t.computed({get(){return n.value},set(y){n.value=y}});function p(y){var i,r;(r=(i=t.unref(c)).change)==null||r.call(i,t.unref(y))}function m(y){var i,r;(r=(i=t.unref(c)).update)==null||r.call(i,t.unref(y))}function _(y){var i,r;(r=(i=t.unref(c)).focus)==null||r.call(i,y)}function h(y){var i,r;(r=(i=t.unref(c)).blur)==null||r.call(i,y)}function C(y){var i,r;(r=(i=t.unref(c)).keydown)==null||r.call(i,y)}return(y,i)=>{const r=t.resolveComponent("d-textarea");return t.openBlock(),t.createBlock(V,{id:o.id,meta:o.meta},{default:t.withCtx(({error:g})=>[t.createVNode(r,t.mergeProps(t.unref(l),{error:!!g,disabled:t.unref(d),maxlength:t.unref(f),rows:t.unref(c).rows,modelValue:t.unref(u),"onUpdate:modelValue":i[0]||(i[0]=x=>t.isRef(u)?u.value=x:null),onUpdate:m,onChange:p,onFocus:_,onBlur:h,onKeydown:C}),null,16,["error","disabled","maxlength","rows","modelValue"])]),_:1},8,["id","meta"])}}});class L extends R{constructor(e,a,s,n){super(e,a,s,n),this.initValue()}initValue(){this._initMetaValue?this.value=this._initMetaValue:t.unref(this.meta).default&&(this.value=t.unref(this.meta).default)}setValue(e){switch(this.type){case"slider":this._value.value=tt(e)||G(e)?e:void 0;break;default:this._value.value=e||void 0;break}}}function Yt(o,e){t.watch(o,()=>{e.validate._forceCompile()})}const Qt=t.defineComponent({name:"v-slider"}),Xt=t.defineComponent({...Qt,props:{id:null,meta:null},setup(o){const e=o,a=t.inject("state"),{appContext:s}=t.getCurrentInstance(),n=new L(s,a,e.id,e.meta),{bindings:l}=E(Object.keys(O.Slider.props),n.ui),d=t.toRef(e.meta,"readOnly"),f=t.toRef(e.meta,"minimum"),c=t.toRef(e.meta,"maximum"),u=t.toRef(e.meta,"multipleOf");Yt([f,c,u],a);const p=t.computed(()=>n.ui.value||{}),m=t.computed({get(){return n.value},set(_){p.value.range?n.value=_||[]:n.value=G(_)?_:void 0}});return(_,h)=>{const C=t.resolveComponent("d-slider");return t.openBlock(),t.createBlock(V,{id:o.id,meta:o.meta},{default:t.withCtx(()=>[t.createVNode(C,t.mergeProps(t.unref(l),{disabled:t.unref(d),min:t.unref(f)||0,max:t.unref(c)||100,step:t.unref(u)||1,modelValue:t.unref(m),"onUpdate:modelValue":h[0]||(h[0]=y=>t.isRef(m)?m.value=y:null)}),null,16,["disabled","min","max","step","modelValue"])]),_:1},8,["id","meta"])}}}),Zt=t.defineComponent({name:"v-rate"}),vt=t.defineComponent({...Zt,props:{id:null,meta:null},setup(o){const e=o,a=t.inject("state"),{appContext:s}=t.getCurrentInstance(),n=new L(s,a,e.id,e.meta),{bindings:l}=E(Object.keys(O.Rate.props),n.ui),d=t.toRef(e.meta,"readOnly"),f=t.computed(()=>n.ui.value||{}),c=t.computed({get(){return n.value},set(p){n.value=p}});function u(p){var m,_;(_=(m=t.unref(f)).change)==null||_.call(m,p)}return(p,m)=>{const _=t.resolveComponent("d-rate");return t.openBlock(),t.createBlock(V,{id:o.id,meta:o.meta},{default:t.withCtx(()=>[t.createVNode(_,t.mergeProps(t.unref(l),{read:t.unref(d),count:o.meta.maximum||5,modelValue:t.unref(c),"onUpdate:modelValue":m[0]||(m[0]=h=>t.isRef(c)?c.value=h:null),onChange:u}),null,16,["read","count","modelValue"])]),_:1},8,["id","meta"])}}}),te=t.defineComponent({name:"v-tag"}),ee=t.defineComponent({...te,props:{id:null,meta:null},setup(o){const e=o,a=t.inject("state"),{appContext:s}=t.getCurrentInstance(),n=new L(s,a,e.id,e.meta),l=t.toRef(e.meta,"readOnly"),d=t.ref([]),f=t.computed(()=>n.ui.value||{}),c=t.computed({get(){return n.value},set(_){f.value.range?n.value=_||[]:n.value=_}});t.watch(()=>t.unref(n.meta).enum,m,{immediate:!0});function u(_,h){var C,y,i,r;_.disabled||(_.checked=h,p(),(y=(C=t.unref(f)).checkedChange)==null||y.call(C,h),(r=(i=t.unref(f)).change)==null||r.call(i,t.toRaw(t.unref(c))))}function p(){const _=t.unref(d).filter(h=>h.checked).map(h=>h.value);c.value=_.length?_:void 0}function m(_){let h=t.unref(_);h==null||!Array.isArray(h)||h.length===0||(typeof h[0]!="object"&&(h=h.map(C=>({label:C,value:C}))),h.forEach(C=>{C.checked=(c.value||[]).indexOf(C.value)>-1}),h.forEach(C=>C.disabled=e.meta.readOnly),d.value=h)}return(_,h)=>{const C=t.resolveComponent("d-tag");return t.openBlock(),t.createBlock(V,{id:o.id,meta:o.meta},{default:t.withCtx(()=>[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(d.value,y=>(t.openBlock(),t.createBlock(C,{key:y.value,type:"primary",class:t.normalizeClass({disabled:y.disabled||t.unref(l)}),checked:y.checked,onClick:()=>u(y,!y.checked)},{default:t.withCtx(()=>[t.createElementVNode("span",null,t.toDisplayString(y.label),1)]),_:2},1032,["class","checked","onClick"]))),128))]),_:1},8,["id","meta"])}}}),Ce="",ne=M(ee,[["__scopeId","data-v-7c567630"]]),oe=t.defineComponent({name:"v-radio"}),ae=t.defineComponent({...oe,props:{id:null,meta:null},setup(o){const e=o,a=t.inject("state"),{appContext:s}=t.getCurrentInstance(),n=new j(s,a,e.id,e.meta),{bindings:l}=E(Object.keys(O.RadioGroup.props),n.ui),d=t.toRef(e.meta,"readOnly"),f=t.computed(()=>n.ui.value||{}),c=t.computed(()=>(t.unref(f).options||[]).map(m=>nt(m)?Object.assign(m,{disabled:m.disabled||!1}):{label:m,value:m,disabled:!1})),u=t.computed({get(){return n.value},set(m){n.value=m}});function p(){var m,_;(_=(m=t.unref(f)).change)==null||_.call(m,t.unref(u))}return(m,_)=>{const h=t.resolveComponent("d-radio-button"),C=t.resolveComponent("d-radio"),y=t.resolveComponent("d-radio-group");return t.openBlock(),t.createBlock(V,{id:o.id,meta:o.meta},{default:t.withCtx(()=>[t.createVNode(y,t.mergeProps({direction:"row",disabled:t.unref(d)},t.unref(l),{modelValue:t.unref(u),"onUpdate:modelValue":_[0]||(_[0]=i=>t.isRef(u)?u.value=i:null),onChange:p}),{default:t.withCtx(()=>[t.unref(f).optionType==="button"?(t.openBlock(!0),t.createElementBlock(t.Fragment,{key:0},t.renderList(t.unref(c),i=>(t.openBlock(),t.createBlock(h,{key:i.value,value:i.value,disabled:i.disabled},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(i.label),1)]),_:2},1032,["value","disabled"]))),128)):(t.openBlock(!0),t.createElementBlock(t.Fragment,{key:1},t.renderList(t.unref(c),i=>(t.openBlock(),t.createBlock(C,{key:i.value,value:i.value,disabled:i.disabled},{default:t.withCtx(()=>[t.createTextVNode(t.toDisplayString(i.label),1)]),_:2},1032,["value","disabled"]))),128))]),_:1},16,["disabled","modelValue"])]),_:1},8,["id","meta"])}}}),re=t.defineComponent({name:"v-select"}),se=t.defineComponent({...re,props:{id:null,meta:null},setup(o){const e=o,a=t.inject("state"),{appContext:s}=t.getCurrentInstance(),n=new j(s,a,e.id,e.meta),{bindings:l}=E(Object.keys(O.Select.props),n.ui),d=t.toRef(e.meta,"readOnly"),f=t.computed(()=>n.ui.value||{}),c=t.computed({get(){return n.value},set(i){n.value=i}}),u=t.computed(()=>["slotNameOfDefault","slotNameOfEmpty"].some(r=>!!t.unref(f)[`${r}`]));function p(i){var r,g;(g=(r=t.unref(f)).valueChange)==null||g.call(r,i)}function m(i){var r,g;(g=(r=t.unref(f)).toggleChange)==null||g.call(r,i)}function _(i){var r,g;(g=(r=t.unref(f)).blur)==null||g.call(r,i)}function h(i){var r,g;(g=(r=t.unref(f)).focus)==null||g.call(r,i)}function C(){var i,r;(r=(i=t.unref(f)).clear)==null||r.call(i)}function y(i){var r,g;(g=(r=t.unref(f)).removeTag)==null||g.call(r,i)}return(i,r)=>{const g=t.resolveComponent("d-select");return t.openBlock(),t.createBlock(V,{id:o.id,meta:o.meta},{default:t.withCtx(()=>[t.unref(u)?(t.openBlock(),t.createBlock(g,t.mergeProps({key:0,modelValue:t.unref(c),"onUpdate:modelValue":r[0]||(r[0]=x=>t.isRef(c)?c.value=x:null)},t.unref(l),{disabled:t.unref(d),onBlur:_,onFocus:h,onClear:C,onRemoveTag:y,onToggleChange:m,onValueChange:p}),t.createSlots({default:t.withCtx(()=>[t.unref(f).slotNameOfDefault?t.renderSlot(i.$slots,t.unref(f).slotNameOfDefault,{key:0}):t.createCommentVNode("",!0)]),_:2},[t.unref(f).slotNameOfEmpty?{name:"empty",fn:t.withCtx(()=>[t.renderSlot(i.$slots,t.unref(f).slotNameOfEmpty)]),key:"0"}:void 0]),1040,["modelValue","disabled"])):(t.openBlock(),t.createBlock(g,t.mergeProps({key:1,modelValue:t.unref(c),"onUpdate:modelValue":r[1]||(r[1]=x=>t.isRef(c)?c.value=x:null)},t.unref(l),{disabled:t.unref(d),onBlur:_,onFocus:h,onClear:C,onRemoveTag:y,onToggleChange:m,onValueChange:p}),null,16,["modelValue","disabled"]))]),_:3},8,["id","meta"])}}});function w(o,e,a){o.component(e,a)}function le(o){w(o,"v-object",Ct),w(o,"v-string",xt),w(o,"v-boolean",wt),w(o,"v-array",Ut),w(o,"v-autocomplete",Vt),w(o,"v-checkbox",$t),w(o,"v-date",Nt),w(o,"v-number",W),w(o,"v-integer",W),w(o,"v-time",Rt),w(o,"v-text",Gt),w(o,"v-radio",ae),w(o,"v-textarea",Jt),w(o,"v-slider",Xt),w(o,"v-rate",vt),w(o,"v-tag",ne),w(o,"v-select",se)}const ie=[ft,V];function J(o){ie.forEach(e=>{o.component(e.name,e)}),le(o)}const ce={installFormly:J},ye="",de={install:function(o,e){if(o.config.globalProperties.emitter=X.default(),!e.lib||e.lib==="devui")ce.installFormly(o);else throw new Error("Unsupport lib");return o.config.globalProperties.$VFORMLY_OPTIONS=e,o}};k.BaseMeta=R,k.FORM_VALUE_CHANGE=F,k.default=de,k.installFormly=J,k.registerFormComponent=w,Object.defineProperties(k,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
